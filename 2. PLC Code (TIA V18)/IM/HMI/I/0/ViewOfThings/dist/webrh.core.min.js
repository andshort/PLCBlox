/*! SIMATIC WINCC UA/WebUX 3.1.14 WinCC Unified PC Runtime {%version%}, Copyright (C) Siemens AG 2023. All Rights Reserved. */
var webRHCore=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=PWC.Lib},function(e,t){e.exports=PWC.Components},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=function(){var e=r.a.Config.PropertyEnums,t=function(e,t){t.insertBefore(e,t.firstChild)},n=function(e){var n=r.a.Config.Properties,o=n.getProp(e,"Width"),i=n.getProp(e,"Height");e.svgWndBg=r.a.Canvas.Svg.createSvgElement("svg",{style:"position: absolute; display: block;",focusable:"false",width:o,height:i}),t(e.svgWndBg,e.domNode),e.domSvgDefs=r.a.Canvas.Svg.createSvgElement("defs",{appendTo:e.svgWndBg}),e.background.svgWndBgFillRect=r.a.Canvas.Svg.createSvgElement("rect",{width:"100%",height:"100%",fill:"none",appendTo:e.svgWndBg}),e.background.svgWndFillRect=r.a.Canvas.Svg.createSvgElement("rect",{width:"100%",height:"100%",fill:"none",appendTo:e.svgWndBg})},o=function(o){r.a.Config.Properties.getPropRaw(o,"BackgroundFillMode")===e.HmiBackgroundFillMode.Window?o.background.svgWndFillRect||n(o):o.background.svgScreenFillRect||(o.background.svgWndFillRect||n(o),function(e){e.background.svgScreenFillRect=r.a.Canvas.Svg.createSvgElement("rect",{width:"100%",height:"100%",fill:"none"}),t(e.background.svgScreenFillRect,e.svgScreenBg),e.background.svgScreenBgFillRect=r.a.Canvas.Svg.createSvgElement("rect",{width:"100%",height:"100%",fill:"none"}),t(e.background.svgScreenBgFillRect,e.svgScreenBg)}(o))},i=function(t){var n,i=r.a.Config.Properties;""!==(n=i.getProp(t,"BackGraphic"))&&null===t.background.svgBgImage?(o(t),t.background.svgBgImage=r.a.Canvas.Svg.createSvgElement("image",{preserveAspectRatio:"none"})):65536!==i.getProp(t,"BackFillPattern")&&(o(t),function(e){var t,n=r.a.Config.Properties,o=r.a.Canvas.Converters,i=r.a.HmiTypes.HmiObject;null!==e.background.svgBgPatternElement&&(e.background.svgBgPatternElement.parentNode.removeChild(e.background.svgBgPatternElement),e.background.svgBgPatternElement=null),null!==e.background.svgBgGradientElement&&(e.background.svgBgGradientElement.parentNode.removeChild(e.background.svgBgGradientElement),e.background.svgBgGradientElement=null),(t=n.getProp(e,"BackFillPattern",o.enumConverter.None,0))>=131072&&(t>=1048576?e.background.svgBgGradientElement=i.createSvgBgGradient(e,t):e.background.svgBgPatternElement=i.createSvgBgPattern(e,t))}(t));""===n&&null!==t.background.svgBgImage&&(t.background.svgBgImage.parentNode.removeChild(t.background.svgBgImage),t.background.svgBgImage=null),function(t){var n,i=r.a.Config.Properties,a=r.a.Canvas.Converters;if(65536===i.getProp(t,"BackFillPattern"))t.domNode.style.pointerEvents="none",t.background.svgWndFillRect&&(t.background.svgWndFillRect.setAttribute("fill","none"),t.background.svgWndBgFillRect.setAttribute("fill","none")),t.background.svgScreenFillRect&&(t.background.svgScreenFillRect.setAttribute("fill","none"),t.background.svgScreenBgFillRect.setAttribute("fill","none")),t.container.isTopLevelScreenWindow&&f.updateLayout(t.core,"white");else{t.domNode.style.pointerEvents="visiblePainted";var s=i.getProp(t,"BackColor",a.enumConverter.Color);if(n=t.background.svgBgGradientElement?r.a.HmiTypes.Utils.mkUrl(t,"ID_ItemBgGradientElement"):t.background.svgBgPatternElement?r.a.HmiTypes.Utils.mkUrl(t,"ID_ItemBgPatternElement"):s,o(t),i.getPropRaw(t,"BackgroundFillMode")===e.HmiBackgroundFillMode.Window)t.background.svgBgPatternElement?(t.background.svgWndFillRect.setAttribute("fill",n),t.background.svgWndBgFillRect.setAttribute("fill",s)):(t.background.svgWndFillRect.setAttribute("fill","none"),t.background.svgWndBgFillRect.setAttribute("fill",n)),t.background.svgScreenFillRect&&(t.background.svgScreenFillRect.setAttribute("fill","none"),t.background.svgScreenBgFillRect.setAttribute("fill","none")),t.container.isTopLevelScreenWindow&&f.updateLayout(t.core,s);else{var c=i.getProp(t,"AlternateBackColor",a.enumConverter.Color);t.background.svgBgPatternElement?(t.background.svgScreenFillRect.setAttribute("fill",n),t.background.svgScreenBgFillRect.setAttribute("fill",s)):(t.background.svgScreenFillRect.setAttribute("fill","none"),t.background.svgScreenBgFillRect.setAttribute("fill",n)),t.background.svgWndFillRect.setAttribute("fill","none"),t.background.svgWndBgFillRect.setAttribute("fill",c),t.container.isTopLevelScreenWindow&&f.updateLayout(t.core,c)}}}(t)},a=function(t){var n,o,i,a=r.a.Config.Properties,s="none";if(null!==t.background.svgBgImage&&t.background.bgImageSize){var c=t.background.bgImageSize,l={l:0,t:0,w:0,h:0},d={l:0,t:0,w:0,h:0},u=a.getProp(t,"BackGraphicStretchMode"),p=a.getProp(t,"BackgroundFillMode");if(p===e.HmiBackgroundFillMode.Window)d.w=t.container.control.width,d.h=t.container.control.height;else{var m=r.a.HmiTypes.HmiObject.getSize(t);d.w=m.w,d.h=m.h}switch(u){case e.HmiGraphicStretchMode.Tiled:p===e.HmiBackgroundFillMode.Window?(t.background.svgBgImagePattern=r.a.Canvas.Svg.createImagePattern(t,t.background.svgBgImagePattern,t.background.svgBgImage,t.background.svgWndFillRect),t.background.svgScreenFillRect&&(t.background.svgScreenFillRect.setAttribute("fill","none"),t.background.svgScreenBgFillRect.setAttribute("fill","none"))):t.background.svgBgImagePattern=r.a.Canvas.Svg.createImagePattern(t,t.background.svgBgImagePattern,t.background.svgBgImage,t.background.svgScreenFillRect),t.background.svgBgImagePattern.setAttribute("width",c.w),t.background.svgBgImagePattern.setAttribute("height",c.h),l.w=c.w,l.h=c.h;break;case e.HmiGraphicStretchMode.Fill:p===e.HmiBackgroundFillMode.Window?t.svgWndBg.insertBefore(t.background.svgBgImage,t.background.svgWndFillRect.nextSibling):t.svgScreenBg.insertBefore(t.background.svgBgImage,t.background.svgScreenFillRect.nextSibling),l=d;break;case e.HmiGraphicStretchMode.Uniform:p===e.HmiBackgroundFillMode.Window?t.svgWndBg.insertBefore(t.background.svgBgImage,t.background.svgWndFillRect.nextSibling):t.svgScreenBg.insertBefore(t.background.svgBgImage,t.background.svgScreenFillRect.nextSibling),n=(d.w-c.w)/c.w,o=(d.h-c.h)/c.h,n<=0&&o>=0||n<=0&&o<=0&&Math.abs(n)>=Math.abs(o)||n>0&&o>0&&Math.abs(n)<=Math.abs(o)?(i=d.w/c.w,l.l=d.l,l.w=d.w,l.h=c.h*i,l.t=d.t+(d.h-l.h)/2):(i=d.h/c.h,l.t=d.t,l.h=d.h,l.w=c.w*i,l.l=d.l+(d.w-l.w)/2);break;case e.HmiGraphicStretchMode.UniformToFill:p===e.HmiBackgroundFillMode.Window?t.svgWndBg.insertBefore(t.background.svgBgImage,t.background.svgWndFillRect.nextSibling):t.svgScreenBg.insertBefore(t.background.svgBgImage,t.background.svgScreenFillRect.nextSibling),n=(d.w-c.w)/c.w,o=(d.h-c.h)/c.h,n>=0&&o<=0||n>=0&&o>=0&&Math.abs(n)>=Math.abs(o)||n<0&&o<0&&Math.abs(n)<=Math.abs(o)?(i=d.w/c.w,l.l=d.l,l.w=d.w,l.h=c.h*i,l.t=d.t+(d.h-l.h)/2):(i=d.h/c.h,l.t=d.t,l.h=d.h,l.w=c.w*i,l.l=d.l+(d.w-l.w)/2);break;default:case e.HmiGraphicStretchMode.None:p===e.HmiBackgroundFillMode.Window?t.svgWndBg.insertBefore(t.background.svgBgImage,t.background.svgWndFillRect.nextSibling):t.svgScreenBg.insertBefore(t.background.svgBgImage,t.background.svgScreenFillRect.nextSibling),l.l=(d.w-c.w)/2,l.t=(d.h-c.h)/2,l.w=c.w,l.h=c.h,s="xMinYMin"}t.background.svgBgImage.setAttribute("preserveAspectRatio",s),t.background.svgBgImage.setAttribute("x",l.l),t.background.svgBgImage.setAttribute("y",l.t),t.background.svgBgImage.setAttribute("width",l.w),t.background.svgBgImage.setAttribute("height",l.h)}},s=function(e,t){var n,o=r.a.Config.Properties,s=r.a.Canvas.Converters;e.background.bgImageSize=t,e.background.imgHelper=null,e.isCleanedUp||(i(e),a(e),n=o.getProp(e,"BackGraphic",s.enumConverter.HRef),e.background.svgBgImage.setAttributeNS(r.a.Canvas.Svg.xlinkNS,"xlink:href",n))};return{createBackground:function(){return{svgScreenFillRect:null,svgScreenBgFillRect:null,svgWndFillRect:null,svgWndBgFillRect:null,svgBgImage:null,svgBgPatternElement:null,svgBgGradientElement:null}},createBackgroundClone:function(e,t){return{svgScreenFillRect:null,svgScreenBgFillRect:null,svgWndFillRect:t.svgWndFillRect.evaluate(e,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,svgWndBgFillRect:t.svgWndBgFillRect.evaluate(e,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,svgBgImage:null,svgBgPatternElement:null,svgBgGradientElement:null}},createBackgroundElements:o,createRemoveSvgBgElementOrPicture:i,backGraphicAlignment:a,getBgImageSize:function(e){var t=r.a.Config.Properties.getProp(e,"BackGraphic");e.background.imgHelper&&(e.background.imgHelper.cleanUp(),e.background.imgHelper=null),""!==t&&(e.background.imgHelper=new r.a.Canvas.ImageHelper,e.background.imgHelper.loadImage(e,t,s))},updateSize:function(e,t,n){e.svgWndBg&&(e.svgWndBg.setAttribute("width",t),e.svgWndBg.setAttribute("height",n))}}}(),a={createTabOrder:function(e){return{type:e,lastSelectedItem:null,tabItems:[]}},addItem:function(e,t){var n=r.a.Config.Properties.getProp(t,e.type);n>0&&(e.tabItems[n]=t)},removeItem:function(e,t){var n=r.a.Config.Properties.getProp(t,e.type);n>0&&(e.tabItems[n]=null)},gotoFirst:function(e){var t,n,o=e.tabItems.length;for(t=1;t<o;t++)if(n=e.tabItems[t],r.a.HmiTypes.HmiObject.canActivate(n))return e.lastSelectedItem=n,n;return null},gotoNext:function(e){var t,n,o,i=r.a.Config.Properties,a=e.tabItems.length,s=!0;if(!e.lastSelectedItem)return this.gotoFirst(e);for(t=(n=i.getProp(e.lastSelectedItem,e.type))+1;;t++){if(t>=a){if(!s)return null;t=0,s=!1}if(o=e.tabItems[t],r.a.HmiTypes.HmiObject.canActivate(o))return e.lastSelectedItem=o,o;if(t===n)return null}},gotoPrev:function(e){var t,n,o,i=r.a.Config.Properties,a=e.tabItems.length;if(!e.lastSelectedItem)return this.gotoFirst(e);for(t=(n=i.getProp(e.lastSelectedItem,e.type))-1;t!==n;t--)if(t<0&&(t=a-1),o=e.tabItems[t],r.a.HmiTypes.HmiObject.canActivate(o))return e.lastSelectedItem=o,o;return null},gotoObject:function(e,t){var n,o,i=r.a.Config.Properties;if(t&&(n=i.getPropRaw(t,e.type,0,0))>0&&n<e.tabItems.length)if((o=e.tabItems[n])===t){if(r.a.HmiTypes.HmiObject.canActivate(o))return e.lastSelectedItem=o,!0}else r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Error,"PWC.Lib.HmiTypes.TabOrder.gotoObject() invalid index: "+n);return!1}};const s=!!window.chrome;let c;var l=function(){var e=r.a.Config.PropertyEnums,t=i,n={lastPanX:0,lastPanY:0,lastZoomFactor:1,scrollInfo:null},o={Enabled:{func:["_enableItems"]},BackFillPattern:{func:["_BgPictGradient"]},BackColor:{func:["_BgPictGradient"]},AlternateBackColor:{func:["_BgPictGradient"]},Width:{gc:"None",func:["_resizeScreen"],svg:[{si:"svgScreenBg",sp:"width"}]},Height:{gc:"None",func:["_resizeScreen"],svg:[{si:"svgScreenBg",sp:"height"}]},HorizontalAlignment:{func:["_adaptToScreenOrWindow"]},VerticalAlignment:{func:["_adaptToScreenOrWindow"]},BackGraphic:{func:["_getBgImageSize"]},BackGraphicStretchMode:{func:["_BackGraphicAlignment"]},BackgroundFillMode:{func:["_BgPictGradient","_BackGraphicAlignment"]}},l=function(){var e=0,t=0;return{createScreenID:function(n){return e++,e=n.props.ElementID||e,t=0,r.a.HmiTypes.Utils.idToRTOID(e)},createItemID:function(n){return t++,t=n.props.ElementID||t,r.a.HmiTypes.Utils.idToRTOID(e,t)}}}(),d={useCloning:r.a.Settings.useCloning,blueprint:null,expressions:null},p=function(e){var t=e.items;if(t)for(var n=t.length,o=0;o<n;o+=1){var r=t[o];r.templateInstance&&r.templateInstance.update(0,!0),r.props.Type.includes("ScreenWindow")&&r.screen&&p(r.screen)}},m=function(e,n){n.core=e,n.rtoid=n.rtoid||l.createScreenID(n),n.items=n.items||[],n.background=t.createBackground(),n.operable=!0,n.handler=r.a.HmiTypes.HmiObjectTypes.getHandler("Screen"),n.layersInfo=r.a.HmiTypes.LayersInfo(n),n.flashingCount=0,n.flashingCountCustom=0,n.offsetLeft=0,n.offsetTop=0,n.loaded=!1,n.fonts&&function(e){const t=e.fonts,n=Object.keys(t),o=n.length;if(document.fonts&&o){const i=e.gfxWebLib.connection.getImageUrl(),a=function(e){r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,e.family+" font loaded successfully.")},s=function(){r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Error,"failed to load font.")};for(let e=0;e<o;e++){const o=n[e],r=t[o];if(document.fonts.check(`12px "${o}"`))continue;const c=encodeURI(`url(${i+r})`),l=new window.FontFace(o,c);l.load().then(a,s),document.fonts.add(l)}e.fontPending=!0,document.fonts.ready.then(function(){r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,"FontFaces loaded."),p(e),e.fontPending=!1,e.activatedCalled&&!e.isCleanedUp&&e.handler.onDocumentActivated(e)})}}(n)},g=function(e){var t=r.a.Canvas.Dom.createDomElement("div",{id:"ID_SVG_Container",style:"position: absolute; pointer-events: none; left: 0px; top: 0px;",appendTo:e});return r.a.Canvas.Svg.createSvgElement("svg",{style:"position: absolute; pointer-events: none; overflow: visible; display: block;",focusable:"false",appendTo:t})},f=function(e,t){return"svg"===t?(e.domSvgItems||(e.domSvgItems=g(e.domHtmlItems)),e.domSvgItems):(e.domSvgItems=null,e.domHtmlItems)},h=function(e){var t,n,o=r.a.Config.Properties;return e.domNode=r.a.Canvas.Dom.createDomElement("div",{"data-rtoid":e.rtoid,"data-tif-id":e.props.Name||"",style:"pointer-events: visiblePainted; backface-visibility: hidden;"}),"FaceplateType"===e.props.Type&&e.domNode.style.removeProperty("backface-visibility"),t=o.getProp(e,"Width"),n=o.getProp(e,"Height"),e.domHtmlItems=r.a.Canvas.Dom.createDomElement("div",{style:"position:absolute; overflow:hidden; left:0px; top:0px; width:"+t+"px; height:"+n+"px;",appendTo:e.domNode}),e.svgScreenBg=f(e,"svg"),e},v=function(e){if(!d.blueprint){var n=h({core:e.core,container:{props:{Type:"ScreenWindow"}},rtoid:"blueprint_screen",gfxWebLib:e.gfxWebLib,handler:e.handler,background:e.background,props:{Type:"Screen"}});r.a.HmiTypes.HmiObject.initAllAttributes(n),d.blueprint=n.domNode,n.domNode=null,function(){var e=new XPathEvaluator,t={},n=function(e){return{svg:"http://www.w3.org/2000/svg",html:"http://www.w3.org/1999/xhtml"}[e]||null};t.svgWndBg=e.createExpression("svg:svg[1]",n),t.domSvgDefs=e.createExpression("svg:defs[1]",n),t.svgWndFillRect=e.createExpression("svg:rect[2]",n),t.svgWndBgFillRect=e.createExpression("svg:rect[1]",n),t.HtmlItems=e.createExpression("html:div[1]",n),t.SvgItems=e.createExpression("html:div[1]/svg:svg[1]",n),d.expressions=t}()}return function(e){e.domNode=d.blueprint.cloneNode(!0),r.a.Canvas.Svg.augmentSvgScreenItemNode(e,{},e.domNode);var t=d.expressions;e.svgWndBg=t.svgWndBg.evaluate(e.domNode,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,e.domSvgDefs=t.domSvgDefs.evaluate(e.svgWndBg,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,e.domHtmlItems=t.HtmlItems.evaluate(e.domNode,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,e.domSvgItems=t.SvgItems.evaluate(e.domHtmlItems,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,e.svgScreenBg=e.domSvgItems}(e),e.background=t.createBackgroundClone(e.svgWndBg,d.expressions),"FaceplateType"===e.props.Type&&e.domNode.style.removeProperty("backface-visibility"),e.isCloning=!0,e.props.Enabled=r.a.Config.Properties.getPropRaw(e,"Enabled"),e.handler.onChanged(e,e.props),e.isCloning=!1,e.domNode},y=function(e){var t=r.a.Config.Properties.getProp(e.container,"CurrentZoomFactor");return Math.min(r.a.Settings.maxZoomFactor||8,Math.max(r.a.Settings.minZoomFactor||.01,t))},P=function(n,o){var i,a,l,d,u=r.a.Config.Properties,p=n.screen;if(!o){if(i={w:n.control.width,h:n.control.height},a={w:u.getPropRaw(p,"Width"),h:u.getPropRaw(p,"Height")},u.getProp(n,"Adaption",0,0)&e.HmiScreenWindowAdaption.ScreenToWindow){l={x:0,y:0};var m=i.w/a.w,g=i.h/a.h;d=Math.min(m,g)||1,t.updateSize(p,i.w,i.h)}else{l=function(t,n){var o,i,a,s=r.a.Config.Properties,c={x:0,y:0};if(t){if((o=(a=y(t))*s.getPropRaw(t,"Width"))<n.w)switch(s.getProp(t,"HorizontalAlignment",0,e.HmiHorizontalAlignment.Left)){case e.HmiHorizontalAlignment.Center:c.x=Math.max(0,Math.round((n.w-o)/2));break;case e.HmiHorizontalAlignment.Right:c.x=Math.max(0,n.w-o)}if((i=a*s.getPropRaw(t,"Height"))<n.h)switch(s.getProp(t,"VerticalAlignment",0,e.HmiVerticalAlignment.Top)){case e.HmiVerticalAlignment.Center:c.y=Math.max(0,Math.round((n.h-i)/2));break;case e.HmiVerticalAlignment.Bottom:c.y=Math.max(0,n.h-i)}}return c}(p,i);var f=Math.max(a.w,i.w),h=Math.max(a.h,i.h);1!==(d=y(p))&&(f=Math.max(a.w*d,i.w),h=Math.max(a.h*d,i.h)),t.updateSize(p,f,h)}r.a.Canvas.Dom.setZoom(p.domHtmlItems,d),p.adaptScreenToWindowFactor&&d!==p.adaptScreenToWindowFactor&&(e=>{s&&(e.querySelectorAll("text").forEach(e=>{if("text"===e.tagName){const t=e.getAttribute("x");t&&e.setAttribute("x",t)}}),c&&clearTimeout(c),document.body.style.opacity=.99,c=setTimeout(()=>{document.body.style.opacity=1},100))})(p.domHtmlItems),p.adaptScreenToWindowFactor=d,p.loaded&&p.container.handler.screenResized&&p.container.handler.screenResized(p.container,l,d),function(e,t){e.offsetLeft!==t.x&&(e.domHtmlItems.style.left=t.x+"px",e.offsetLeft=t.x),e.offsetTop!==t.y&&(e.domHtmlItems.style.top=t.y+"px",e.offsetTop=t.y)}(p,l),t.backGraphicAlignment(p)}},b=function(e,t){const n=e.length;if(n)for(let o=0;o<n;o++){const n=e[o],r=n.props.ContainedItems;if(r){if(r.filter(e=>e===t.props.ElementID).length)return n}}return null},S=function(e){var t=e.container.control.domParent;t&&e.activated&&(t.contains(e.domNode)||t.appendChild(e.domNode))},T=function(e){e.domNode&&(e.domNode.parentNode&&e.domNode.parentNode.removeChild(e.domNode),e.domNode=null)},w=function(e,t,n,o){if(e.flashing){const i=e.flashing.find(e=>e.item===t&&e.part===o);if(i)for(var r in n)if(n.hasOwnProperty(r)){const e=i.props[r];e&&(e.CurrentValue=n[r])}}},I=function(e,t){if(e)for(var n=e.length,o=0;o<n;o+=1){var i=e[o];if(i.rtoid===t)return i}return r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Warning,"HmiScreen.getScreenItemByRtoid() Warning: Unknown item rtoid: "+t),null},C=function(e,t){return e.rtoid===t?e:I(e.items,t)},D=function(e,t){t.gfxWebLib&&(r.a.HmiTypes.HmiObject.onCleanUp(t),r.a.HmiTypes.Utils.isScreenContainer(t)&&(e.core.SOMManager.removeScreenWindow(t),r.a.Settings.scrollPopups&&"PopupScreenWindow"===t.props.Type&&e.core.toplevelWindow.control.handler.removePopup(e.core.toplevelWindow,t)))},E=function(e){var t=e.items;window.setTimeout(function(){H(e,t,0,50,100)},100)},H=function(e,t,n,o,r){var i,a,s=Date.now();if(t)for(a=t.length,i=n;i<=o&&i<a;i+=1){var c=t[i];D(e,c)}if(i>=a)t.length=0;else{var l=function(e,t){return Math.round(100*t/e)}(Date.now()-s,o-n+1);o=(n=i)+l,window.setTimeout(function(){H(e,t,n,o,r)},r)}},O=function(e,t){var n,o,i,s;if(I(e.items,t.rtoid))r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Error,"HmiScreen._addItemToScreen() item already exists: "+t.rtoid);else{if("TopLevelScreenWindow"===(i=r.a.HmiTypes.HmiObject.getHandlerType(t)))return e.core.toplevelWindow.rtoid=t.rtoid,t.props.WindowFlags=0,void u.onChanged(e.core.toplevelWindow,t.props);r.a.HmiTypes.HmiObjectTypes.isTypeSupported(i)?(n=(s=r.a.HmiTypes.HmiObjectTypes.getHandler(i)).DOM_TYPE||"svg",t.domParent=f(e,n),t.handler=s,t.gfxWebLib=e.gfxWebLib,t.container=e,"PopupScreenWindow"===t.props.Type&&function(e,t){e!==e.core.popupScreen&&(t.domParent=e.core.domNode,t.container=e.core.popupScreen,t.popupContainer=e)}(e,t),o=s.onInit(t),r.a.HmiTypes.Utils.isScreenContainer(t)&&(e.core.SOMManager.addScreenWindow(t),"PopupScreenWindow"===t.props.Type&&(o=function(e,t){var n=r.a.Config.Properties;return t.isPopupScreenWindow=!0,t.control.handler.desktopOverlay=u.desktopOverlay,r.a.Settings.zoomOnPoint&&(t.domNode.style.position="fixed"),n.getProp(t,"IsModal",0,!1)?(t.domNodeModal=r.a.Canvas.Dom.createDomElement("div",{style:"position:fixed; left:0px; top:0px; width:100%; height:100%; background-color:rgba( 0, 0, 0, 0.75 );"}),t.domNodeModal.appendChild(t.domNode),t.domNodeModal):t.domNode}(0,t),r.a.Settings.scrollPopups&&e.core.toplevelWindow.control.handler.addPopup(e.core.toplevelWindow,t))),t.domParent.appendChild(o),e.items.push(t),void 0!==t.pos&&N(e,t,t.pos,e.items.length-1),a.addItem(e.tabOrder,t),t.control&&(r.a.HmiTypes.Advanced.HmiWindowManager.register(t.container.winManager,t),r.a.HmiTypes.Advanced.HmiWindowManager.bringToFront(t.container.winManager,t))):r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Error,"HmiScreen._addItemToScreen() Unsupported item: "+t.props.Type)}},M=function(e,t){var n,o=I(e.items,t.rtoid);o&&(o.control&&r.a.HmiTypes.Advanced.HmiWindowManager.unregister(o.container.winManager,o),D(e,o),o.domParent.contains(o.domNode)&&o.domParent.removeChild(o.domNode),a.removeItem(e.tabOrder,o),(n=e.items.indexOf(o))>-1&&e.items.splice(n,1),e.core.Interaction.Selection.getActiveItem()===o&&e.core.Interaction.Selection.initializeActiveItem())},W=function(e){for(var t=null,n=[],o=e.domHtmlItems.firstChild;null!==o;o=o.nextSibling)"ID_SVG_Container"===o.id?t?t.push(o):t=[o]:t&&(t.length>1&&n.push(t),t=null);if(n.length>0)for(const e of n){const t=e[0].firstChild;for(let n=1;n<e.length;n++){e[n].parentNode.removeChild(e[n]);const o=e[n].firstChild;for(;o.children.length>0;)t.appendChild(o.children[0])}}},N=function(e,t,n,o){if(n!==o&&n<e.items.length){var r=e.items[n];if(0===n)r.handler.DOM_TYPE===t.handler.DOM_TYPE?(t.domParent=r.domParent,r.domParent.insertBefore(t.domNode,r.domNode)):"svg"===t.handler.DOM_TYPE?(t.domParent=g(e.domHtmlItems),t.domParent.appendChild(t.domNode),e.domHtmlItems.insertBefore(t.domParent.parentNode,r.domNode)):(t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,r.domParent.parentNode));else if(n===e.items.length-1)r.handler.DOM_TYPE===t.handler.DOM_TYPE?(t.domParent=r.domParent,r.domParent.appendChild(t.domNode)):(t.domParent=f(e,t.handler.DOM_TYPE),t.domParent.appendChild(t.domNode));else if(n>o)if(r.handler.DOM_TYPE===t.handler.DOM_TYPE)"svg"===t.handler.DOM_TYPE?(t.domParent=r.domParent,r.domParent.insertBefore(t.domNode,r.domNode.nextSibling)):(t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,r.domNode.nextSibling));else{var i=e.items[n+1];if(i.handler.DOM_TYPE===t.handler.DOM_TYPE)t.domParent=i.domParent,i.domParent.insertBefore(t.domNode,i.domNode);else if("svg"===t.handler.DOM_TYPE)t.domParent=g(e.domHtmlItems),t.domParent.appendChild(t.domNode),e.domHtmlItems.insertBefore(t.domParent.parentNode,r.domNode.nextSibling);else if(r.domNode===r.domParent.lastChild)t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,r.domParent.parentNode.nextSibling);else{const o=g(e.domHtmlItems);e.domHtmlItems.insertBefore(o.parentNode,r.domParent.parentNode.nextSibling);for(let t=n+1;t<e.items.length;t++){let n=e.items[t];if("svg"!==n.handler.DOM_TYPE)break;n.domParent=o,o.appendChild(n.domNode)}t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,o.parentNode)}}else if(r.handler.DOM_TYPE===t.handler.DOM_TYPE)t.domParent=r.domParent,r.domParent.insertBefore(t.domNode,r.domNode);else{var a=e.items[n-1];if(a.handler.DOM_TYPE===t.handler.DOM_TYPE)t.domParent=a.domParent,a.domParent.insertBefore(t.domNode,a.domNode.nextSibling);else if("svg"===t.handler.DOM_TYPE)t.domParent=g(e.domHtmlItems),t.domParent.appendChild(t.domNode),e.domHtmlItems.insertBefore(t.domParent.parentNode,r.domNode);else if(r.domNode===r.domParent.firstChild)t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,r.domParent.parentNode);else{const o=g(e.domHtmlItems);e.domHtmlItems.insertBefore(o.parentNode,r.domParent.parentNode.nextSibling);for(let t=n;t<e.items.length;t++){let n=e.items[t];if("svg"!==n.handler.DOM_TYPE)break;n.domParent=o,o.appendChild(n.domNode)}t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,o.parentNode)}}e.items.splice(n,0,e.items.splice(o,1)[0])}},A=function(e,t){var n=I(e.items,t.rtoid);n&&n.handler&&n.handler.onCreatePart&&n.handler.onCreatePart(n,t.part,t.props)},B=function(e,t){var n=I(e.items,t.rtoid);n&&n.handler&&n.handler.onDeletePart&&n.handler.onDeletePart(n,t.part)},k=function(e,t){var n=I(e.items,t.rtoid);n&&n.handler&&n.handler.onMovePart&&n.handler.onMovePart(n,t.part,t.pos)},x=function(e){for(var t=r.a.Config.Properties,n=e.items.length,o=0;o<n;o+=1){var i=e.items[o];i.handler&&t.getProp(i,"Visible")&&(i.handler.onChanged(i,{Visible:!0}),"FaceplateContainer"===i.props.Type&&i.control.handler.updateVisibility(i))}},L=function(e){if(0===e.controlsCache.length)for(var t=e.items.length,n=0;n<t;n+=1){var o=e.items[n];o.handler&&o.handler.onScreenItemsInitialized&&o.handler.onScreenItemsInitialized(o)}},F=function(e,t,n){try{e.handler.onChanged(e,t,n)}catch(t){r.a.Debug.traceErr(t,"Screen:_tryUpdate()",e)}},R=function(e){var t=e.dirtyList;if(t){for(var n=t.length,o=0;o<n;o+=1){var i=t[o];F(e,i.props,i.part)}e.hasFocus&&(r.a.HmiTypes.HmiObject.clearSelectionProps(e),r.a.HmiTypes.HmiObject.setSelectionProps(e)),e.dirtyList=null}},_=function(e){var t=e.control?e.control.handler:e.handler;if(t&&t.onRedraw)try{t.onRedraw(e)}catch(t){r.a.Debug.traceErr(t,"Screen:_redrawControl()",e)}},U=function(e){try{e.templateInstance&&e.templateInstance.update()}catch(t){r.a.Debug.traceErr(t,"Screen:_redrawTemplate()",e)}},j=function(e,t){const o=t.deltaX-n.lastPanX;o&&(e.container.handler.onPan(e.container,o,!0),n.lastPanX=t.deltaX);const r=t.deltaY-n.lastPanY;r&&(e.container.handler.onPan(e.container,r,!1),n.lastPanY=t.deltaY)},z={animate:function(e){var t=0,n=Date.now(),o=function(){var r=(Date.now()-n)/e.duration;r>1&&(r=1);var i=r-t;t=r,e.step(i)&&1!==r?window.requestAnimationFrame(o):"function"==typeof e.complete&&e.complete()};window.requestAnimationFrame(o)},momentumScroll:function(e,t){return this.animate({duration:t.duration,complete:t.complete,step:function(n){var o=e.container;if(o){const e=(n=Math.min(.1,n))*t.size;if(o.handler.onPan(o,e,t.direction))return t.running}}}),t}};return{DISABLE_SETSELECTIONPROPS:!0,onCurrentLanguage:function(e,t){var n=e.items;if(n)for(var o=n.length,i=0;i<o;i+=1){var a=n[i],s=a.handler;if(s&&s.onCurrentLanguage)try{s.onCurrentLanguage(a,t)}catch(e){r.a.Debug.traceErr(e,"Exception in HmiScreen.onCurrentLanguage() item type: "+a.props.Type)}}},onDocumentChanged:function(o,i){var s=r.a.Canvas.Pattern;i.container.handler.onScreenChangedPre&&i.container.handler.onScreenChangedPre(i.container),m(o,i),d.useCloning?v(i):(h(i),r.a.HmiTypes.HmiObject.addTifLibExpandoProps(i,i.domNode),r.a.HmiTypes.HmiObject.initAllAttributes(i)),i.container.isTopLevelScreenWindow&&(t.createBackgroundElements(i),s.createScreenHostedPatterns(i),i.container.control.handler.desktopOverlay(i.container)),i.container.control.handler.onResized(i.container);try{!function(e){var t,n,o,i,s,c,d,u,p=0,m=[];for(e.tabOrder=a.createTabOrder("TabIndex"),e.winManager=r.a.HmiTypes.Advanced.HmiWindowManager.createManager(),e.controlsCache=[],n=e.items.length,t=0;t<n;t+=1)o=e.items[t],s=r.a.HmiTypes.HmiObject.getHandlerType(o),r.a.HmiTypes.HmiObjectTypes.isTypeSupported(s)?(c=r.a.HmiTypes.HmiObjectTypes.getHandler(s,o),o.handler=c,o.gfxWebLib=e.gfxWebLib,o.container=e,o.rtoid=o.rtoid||l.createItemID(o),"Group"===o.props.Type&&m.push(o),u=b(m,o),o.domParent=u?u.handler.addItem(u,o):f(e,c.DOM_TYPE||"svg"),(i=c.onInit(o))&&o.domParent.appendChild(i),a.addItem(e.tabOrder,o),(d=r.a.HmiTypes.Utils.isScreenContainer(o))&&e.core.SOMManager.addScreenWindow(o),o.control&&(r.a.HmiTypes.Advanced.HmiWindowManager.register(o.container.winManager,o),o.control.initialized||d||e.controlsCache.push(o.rtoid))):(r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Error,"HmiScreen.LoadItems() Unsupported item: "+o.props.Type),p+=1);a.gotoFirst(e.tabOrder),r.a.HmiTypes.Advanced.HmiWindowManager.bringAlwaysOnTop(e.winManager),L(e),0!==p&&r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Error,"HmiScreen.LoadItems() Unsupported items: "+p+" of "+e.items.length.toString())}(i)}catch(e){r.a.Debug.traceErr(e,"HmiScreen.LoadItems()",i)}i.loaded=!0,!r.a.Settings.zoomOnPoint&&i.container.isTopLevelScreenWindow||!i.container.handler.onScreenChanged||i.container.handler.onScreenChanged(i.container),"FaceplateContainer"!==i.container.props.Type&&(o.Notifier.onScreenLoaded(i.rtoid),r.a.Settings.zoomOnPoint&&window.Hammer&&function(t){var o=r.a.Config.Properties;t.hammertime=new Hammer.Manager(t.domNode,{touchAction:"none"}),t.hammertime.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL,threshold:5})),t.hammertime.add(new Hammer.Swipe({velocity:.1,threshold:8}).recognizeWith(t.hammertime.get("pan"))),t.hammertime.add(new Hammer.Pinch({threshold:0,enable:!0})),t.hammertime.on("pinchstart",function(r){var i=t.container;o.getProp(i,"InteractiveZooming")&&o.getProp(i,"Adaption")!==e.HmiScreenWindowAdaption.ScreenToWindow&&(t.handler.lockGesture(t,t.hammertime),n.lastZoomFactor=y(t),n.lastPanX=n.lastPanY=0)}),t.hammertime.on("pinch",function(r){var i=t.container;if(o.getProp(i,"InteractiveZooming")&&o.getProp(i,"Adaption")!==e.HmiScreenWindowAdaption.ScreenToWindow){var a={};t.core.Interaction.getRelEventPosInScreenAndItem({x:r.center.x,y:r.center.y},i,{},a),a.x-=i.control.left,a.y-=i.control.top,t.container.handler.onPinchZoom(i,n.lastZoomFactor*r.scale,a),j(t,r)}}),t.hammertime.on("panstart",function(e){n.lastPanX=n.lastPanY=0,t.container.handler.isScreenMoveable(t.container,e.deltaX,e.deltaY)&&t.handler.lockGesture(t,t.hammertime)}),t.hammertime.on("pan",function(e){j(t,e)}),t.hammertime.on("swipe",function(e){n.scrollInfo=z.momentumScroll(t,{running:!0,duration:1e3,direction:e.offsetDirection&Hammer.DIRECTION_HORIZONTAL,size:1e3*e.velocity})}),t.hammertime.on("hammer.input",function(e){e.eventType===Hammer.INPUT_START&&n.scrollInfo&&(n.scrollInfo.running=!1,n.scrollInfo=null)})}(i))},onDocumentActivated:function(e){if(e.activatedCalled=!0,e.activated||e.fontPending)e.activated&&r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Warning,"HmiScreen.onDocumentActivated() Screen is already activated: "+e.rtoid);else if(function(e){var t=r.a.Config.Properties,n=0;if(e.flashing){for(var o=e.flashing.length,i=0;i<o;i+=1){var a=e.flashing[i],s=a.item||C(e,a.rtoid);if(s){a.item=s;var c=a.props;for(var l in c)if(c.hasOwnProperty(l)){var d=c[l];if(a.part){var u=t.getPart(s,a.part);d.CurrentValue=t.getPropPart(u,u.Type,l)}else d.CurrentValue=t.getProp(s,l);d.Active&&(n=Math.max(n,d.Rate),e.flashingCount+=1)}}}e.flashingCount&&e.core.Flashing.startFlashing(n)}}(e),e.activated=!0,S(e),e.container.isTopLevelScreenWindow&&e.core){var t=e.core.domNode;t!==document.activeElement&&t.focus();var n=e.tabOrder.lastSelectedItem||e;e.core.Interaction.Selection.getActiveItem()!==n&&e.core.Interaction.Selection.initializeActiveItem(n)}},onInitializedControl:function(e,t){var n=e.controlsCache.indexOf(t.rtoid);n>-1&&(e.controlsCache.splice(n,1),L(e))},onObjectInitialized:function(e,t){t.items&&t.items.length&&function(e,t){for(var n=t.length,o=0;o<n;o+=1){var i=t[o],a=C(e,i.rtoid);if(a)try{w(e,a,i.props,i.part),void 0!==a.handler.onChanged?a.handler.onChanged(a,i.props,i.part):r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Error,"HmiScreen._onScreenItemsInitialized() Error: itemHandler does not support onChanged() type: "+a.props.Type)}catch(t){r.a.Debug.traceErr(t,"HmiScreen._onScreenItemsInitialized() type: "+a.props.Type+" name: "+a.props.Name,e)}}}(e,t.items)},onObjectChanged:function(e,t){t.items&&t.items.length&&function(e,t){var n,o,i,a,s=t.length;function c(e,t){for(var n=e.length,o=0;o<n;o+=1){var r=e[o];if(r.part===t)return r}}for(n=0;n<s;n+=1)a=t[n],(o=C(e,a.rtoid))&&(w(e,o,a.props,a.part),o.dirtyList?(i=c(o.dirtyList,a.part))?r.a.jQL.extend(i.props,a.props):o.dirtyList.push(a):o.dirtyList=[a],o.dirtyFlags|=1);e.dirtyFlags|=4}(e,t.items)},onFlashingDynamicChanged:function(e,t){var n,o=r.a.Config.Properties,i=!1;e.flashing=e.flashing||[];for(var a=e.flashing.length,s=0;s<a;s+=1){var c=e.flashing[s];if(c.rtoid===t.rtoid&&c.part===t.part){n=c;break}}n||(t.item=C(e,t.rtoid),e.flashing[a]=t,n=t,i=!0);var l=t.props;for(var d in l)if(l.hasOwnProperty(d)){var u=!1,p=l[d],m=n.props[d];if(m?(m.Value=p.Value,m.Alternate=p.Alternate,m.Rate=p.Rate):(n.props[d]=p,m=p,u=!0),m.Active!==p.Active||i||u){m.Active=p.Active;var g=n.item;if(p.Active){if(e.activated){if(n.part){var f=o.getPart(g,n.part);m.CurrentValue=o.getPropPart(f,f.Type,d)}else m.CurrentValue=o.getProp(g,d);e.core.Flashing.startFlashing(p.Rate)}e.flashingCount+=1}else i||u||(e.activated&&g.handler.onChanged(g,Object.defineProperty({},d,{value:m.CurrentValue,configurable:!0,enumerable:!0,writable:!0}),n.part),e.flashingCount-=1)}else e.activated&&e.core.Flashing.startFlashing(p.Rate)}},onObjectAdded:function(e,t){for(var n=t.length,o=0;o<n;o+=1){var r=t[o];r.part?A(e,r):O(e,r)}W(e)},onObjectRemoved:function(e,t){for(var n=t.length,o=0;o<n;o+=1){var r=t[o];r.part?B(e,r):M(e,r)}},onObjectMoved:function(e,t){for(var n=t.length,o=0;o<n;o+=1){var r=t[o];if(r.part)k(e,r);else{var i=I(e.items,r.rtoid);if(i){var a=e.items.indexOf(i);N(e,i,r.pos,a)}}}W(e)},getItem:function(e,t){return I(e.items,t)},enumItems:function(e,t,n,o){var r;if("function"!=typeof n)return!1;"function"!=typeof o&&(o=null),r=e.items.length;for(var i=0;i<r;i+=1){var a=e.items[i];if((!o||o.call(t,a))&&n.call(t,a))break}return!0},adaptToScreenOrWindow:P,updateVisibility:x,declutterLayers:function(e,t){t=t||e.adaptScreenToWindowFactor,e.layersInfo.layerDecluttering(t)&&x(e)},updateStyle:function(e,t){var n=e.items;if(e.winManager&&r.a.HmiTypes.Advanced.HmiWindowManager.clearActive(e.winManager),r.a.Canvas.ImageHelper.clear(),n&&n.length)for(var o=n.length,i=0;i<o;i+=1){var a=n[i],s=a.handler;if(s&&s.onCurrentStyle)try{s.onCurrentStyle(a,t)}catch(e){r.a.Debug.traceErr(e,"HmiScreen.updateStyle itemType: "+a.props.Type+" itemName: "+a.props.Name)}}},appendToParentNode:S,removeFromParentNode:T,onChanged:function(e,t,n){n?(n.startsWith(":")&&(n=n.substring(1)),n.startsWith("Layers")&&r.a.HmiTypes.Layers.onChanged(e,t,n)):r.a.HmiTypes.HmiObject.onChanged(e,t)},onCleanUp:function(e){e&&(e.isCleanedUp=!0,r.a.HmiTypes.HmiObject.removeTifLibExpandoProps(e),r.a.HmiTypes.Advanced.HmiWindowManager.cleanUp(e.winManager),e.core.Interaction.Input.checkHandleInputEndForScreen(e),e.core.Interaction.Selection.checkHandleSelectionEnd(e),e.core.Interaction.removeEvents(e),e.hammertime&&e.hammertime.destroy(),E(e),T(e),e.core.Notifier.onScreenUnloaded(e.rtoid,e),e.controlsCache=e.tabOrder=e.layersInfo=e.container=e.gfxWebLib=null)},getPropertyBinding:function(){return o},onPropBindFunc:function(e,n,o){switch(e){case"_BackGraphicAlignment":t.backGraphicAlignment(n);break;case"_getBgImageSize":t.getBgImageSize(n);break;case"_BgPictGradient":t.createRemoveSvgBgElementOrPicture(n);break;case"_resizeScreen":!function(e,t){if(!t){var n=r.a.Config.Properties,o=n.getPropRaw(e,"Width"),i=n.getPropRaw(e,"Height");e.domHtmlItems.style.width=o+"px",e.domHtmlItems.style.height=i+"px",e.isCloning||e.container.control.handler.onResized(e.container)}}(n,o);break;case"_adaptToScreenOrWindow":P(n.container,o);break;case"_enableItems":!function(e,t){var n=r.a.Config.Properties,o=n.getProp(e,"Enabled"),i=n.getProp(e.container,"Enabled"),a=e.isEnabled;if(e.isEnabled=i&&o,e.gfxWebLib.interaction.addEvents(e,e.isEnabled),!t&&!e.isCloning&&a!==e.isEnabled)for(var s=e.items.length,c=0;c<s;c+=1){var l=e.items[c];l.handler.getPropertyBinding()&&!l.ignorePropertyBinding?l.handler.onChanged(l,{Enabled:n.getProp(l,"Enabled")}):l.handler.onChanged(l,{_Enabled:!0})}}(n,o);break;default:r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Error,"HmiScreen.onPropBindFunc() Error: unknown function "+e)}},onFlashing:function(e,t,n){var o,i,a=r.a.Config.Properties;if(e.flashingCount)for(o=e.flashing.length,i=0;i<o;i+=1){var s=e.flashing[i];e.core.Flashing.setFlashingProperties(s,t)}if(e.flashingCountCustom)for(o=e.items.length,i=0;i<o;i+=1){var c=e.items[i];c.flashingProps&&a.getPropRaw(c,"Visible")&&c.handler&&void 0!==c.handler.onFlashing&&c.flashingRate>=t&&c.handler.onFlashing(c,t,n)}},onScreenItemTemplateInstanceDirty:function(e){(e.popupContainer||e.container).dirtyFlags|=4,e.dirtyFlags|=8},onRedraw:function(e){var t=0;if(1&e.dirtyFlags&&(R(e),t+=1),4&e.dirtyFlags)for(var n=e.items.length,o=0;o<n;o+=1){var r=e.items[o];r.dirtyFlags&&(1&r.dirtyFlags&&(R(r),t+=1),2&r.dirtyFlags&&(_(r),t+=1),8&r.dirtyFlags&&(U(r),t+=1),r.dirtyFlags=0)}return t},getCalculatedZoomFactor:function(e){var t={};return r.a.HmiTypes.HmiObject.getRelPosToTLSW(e,t),t.adaptScreenToWindowFactor},notifyGesture:function(e){e.eventStore&&e.eventStore.forEach(e=>{e()})},lockGesture:function(e,t,n){e.handler.notifyGesture(e),window.Hammer&&window.Hammer.stopManagers&&window.Hammer.stopManagers(t),!n&&r.a.HmiTypes.Advanced.Interaction&&r.a.HmiTypes.Advanced.Interaction.stopCapture()},registerEvent:function(e,t){if(e.eventStore=e.eventStore||[],e.eventStore.push(t),1===e.eventStore.length){var n=e.container;n.isTopLevelScreenWindow||n.isPopupScreenWindow||(e.closure=(()=>{e.handler.notifyGesture(e)}),e.handler.registerEvent(n.container,e.closure))}},unregisterEvent:function(e,t){e.eventStore=e.eventStore||[];const n=e.eventStore.indexOf(t);if(-1!==n&&(e.eventStore.splice(n,1),e.closure&&0===e.eventStore.length)){var o=e.container;o.isTopLevelScreenWindow||o.isPopupScreenWindow||e.handler.unregisterEvent(o.container,e.closure),e.closure=null}}}}(),d=function(){var e=r.a.Config.PropertyEnums,t=0,n={rtoid:"00_01",props:{Name:"TopLevelScreenWindow_1",Screen:"",StartupPosition:0,Width:803,Height:603,Left:0,Top:0,Enabled:!0,Operability:0,Visible:!0,Layer:"",Adaption:0,InteractiveZooming:!0,HorizontalScrollBarVisibility:0,HorizontalScrollBarPosition:0,VerticalScrollBarVisibility:0,VerticalScrollBarPosition:0,CurrentZoomFactor:1,WindowFlags:0,Type:"TopLevelScreenWindow",ElementID:1}};return{DOM_TYPE:"dom",createWindow:function(e,o,i){var a=r.a.jQL.extend({},n,{container:e,domParent:o,gfxWebLib:e.gfxWebLib});return d.onInit(a,i),t+=1,a.windowID=t,a},onInit:function(t,n){var o=f.getDesktopSize();t.popups=[],t.props.Adaption=n.adaptBaseScreenToWindow?e.HmiScreenWindowAdaption.ScreenToWindow:0,t.props.Width=n.width||o.w,t.props.Height=n.height||o.h,t.handler=r.a.HmiTypes.HmiObjectTypes.getHandler(r.a.HmiTypes.HmiObjectTypes.TYPE_HMI_SCREENWINDOW),t.isTopLevelScreenWindow=!0,t.control={left:0,top:0,width:t.props.Width,height:t.props.Height,handler:d},t.events={Activated:{fire:!0,callbacks:[]},Deactivated:{fire:!0,callbacks:[]},Resized:{fire:!0,callbacks:[]}},r.a.Settings.zoomOnPoint?(document.documentElement.style.overflow="hidden",t.domNode=r.a.Canvas.Dom.createDomElement("div",{id:"ID_TopLevelScreenWindow",style:`position:absolute; left:0px; top:0px; width:${t.control.width}px; height:${t.control.height}px; outline:none; overflow:hidden;`,appendTo:t.domParent}),t.control.domParent=r.a.Canvas.Dom.createDomElement("div",{style:"pointer-events:auto; position:relative;",appendTo:t.domNode})):t.control.domParent=t.domNode=r.a.Canvas.Dom.createDomElement("div",{id:"ID_TopLevelScreenWindow",style:"position:absolute; left:0px; top:0px; outline:none;",appendTo:t.domParent}),r.a.HmiTypes.Utils.setPrefixedStyle(t.domParent,"userSelect","none"),r.a.HmiTypes.Utils.setPrefixedStyle(t.domParent,"touchCallout","none"),r.a.HmiTypes.Utils.setPrefixedStyle(t.domParent,"userDrag","none"),r.a.HmiTypes.Utils.setPrefixedStyle(t.domParent,"tapHighlightColor","rgba(0,0,0,0)"),r.a.HmiTypes.Utils.setPrefixedStyle(t.domNode,"transform","translate(0.0px, 0.0px)"),t.control.handler.desktopOverlay(t)},onChanged:function(e,t,n){if(!n){var o=!1;if(r.a.jQL.extend(e.props,t),void 0!==t.Enabled&&e.screen&&e.screen.handler.onChanged(e.screen,{Enabled:r.a.Config.Properties.getProp(e.screen,"Enabled")}),!r.a.Settings.zoomOnPoint&&(void 0!==t.HorizontalScrollBarPosition||void 0!==t.VerticalScrollBarPosition)){const n={},o=e.props.CurrentZoomFactor;void 0!==t.HorizontalScrollBarPosition&&(n.left=t.HorizontalScrollBarPosition*o),void 0!==t.VerticalScrollBarPosition&&(n.top=t.VerticalScrollBarPosition*o),window.scrollTo(n)}void 0===t.CurrentZoomFactor&&void 0===t.Adaption||(o=!0),void 0!==t.Left&&(e.domNode.style.left=`${t.Left}px`,o=!0),void 0!==t.Top&&(e.domNode.style.top=`${t.Top}px`,o=!0),o&&d.onResized(e)}},onResized:function(t){if(t.container.config.appType!==r.a.AppType.CLOUD){var n=f.getDesktopSize(),o=n.w,i=n.h;t.container.options.traceView&&(o-=t.container.options.traceView.offsetWidth,i=n.h),t.control.width=o-t.props.Left,t.control.height=i-t.props.Top,t.props.Width=t.control.width,t.props.Height=t.control.height,t.gfxWebLib.connection.sendPropertiesByName(t.rtoid,{Width:t.control.width,Height:t.control.height}),r.a.Settings.zoomOnPoint&&(t.domNode.style.width=t.control.width+"px",t.domNode.style.height=t.control.height+"px")}if(t.screen){l.adaptToScreenOrWindow(t),t.screen.handler.declutterLayers(t.screen),r.a.Config.Properties.getProp(t,"Adaption")===e.HmiScreenWindowAdaption.ScreenToWindow&&(t.props.CurrentZoomFactor=t.screen.adaptScreenToWindowFactor,t.gfxWebLib.connection.sendPropertyByName(t.rtoid,"CurrentZoomFactor",t.screen.adaptScreenToWindowFactor))}},onScroll:function(e){const t=e.props.CurrentZoomFactor,n={HorizontalScrollBarPosition:window.scrollX/t,VerticalScrollBarPosition:window.scrollY/t};e.props.HorizontalScrollBarPosition=n.HorizontalScrollBarPosition,e.props.VerticalScrollBarPosition=n.VerticalScrollBarPosition,e.gfxWebLib.connection.sendPropertiesByName(e.rtoid,n,!1,!0)},addPopup:function(e,t){t.scrollOffsetX=e.scrollX||"0",t.scrollOffsetY=e.scrollY||"0",e.popups.push(t)},removePopup:function(e,t){const n=e.popups.indexOf(t);n>-1&&e.popups.splice(n,1)},onScrollPopups:function(e,t){e.popups.forEach(n=>{n.props.Left=n.props.Left-parseFloat(n.scrollOffsetX)+parseFloat(e.scrollX),n.props.Top=n.props.Top-parseFloat(n.scrollOffsetY)+parseFloat(e.scrollY),t.onChanged(n,{Left:n.props.Left,Top:n.props.Top}),n.scrollOffsetX=e.scrollX,n.scrollOffsetY=e.scrollY})},onCleanUp:function(e){var t=e.screen;t&&t.handler&&t.handler.onCleanUp(t)},getTopLevelScreenWindow:function(e){return function(e){if(!e.isTopLevelScreenWindow){for(var t=e.container.container;!t.isTopLevelScreenWindow&&!t.isPopupScreenWindow;)t=t.container.container;return t}return e}(e)},enumScreens:function(e,t,n,o){var r=e.SOMManager.getScreenWindows(),i=r.length;if("function"!=typeof n)return!1;"function"!=typeof o&&(o=null);for(var a=0;a<i;a+=1){var s=r[a].screen;if(s)if((!o||o.call(t,s))&&n.call(t,s))break}return!0},scrollIntoView:function(e,t){var n=r.a.Config.Properties,o=Math.max(.02,n.getPropRaw(e,"CurrentZoomFactor")),i=!1;function a(e,t,n,o){return!1===i||n<=e+o&&e<=t+o?Math.max(0,Math.min(n,Math.max(t,e))):(t+n)/2}1!==o&&(t=t.zoom(o));var s=document.scrollingElement||document.documentElement,c=a(s.scrollLeft,t.right-document.documentElement.clientWidth,t.left,document.documentElement.clientWidth),l=a(s.scrollTop,t.bottom-document.documentElement.clientHeight,t.top,document.documentElement.clientHeight);s.scrollLeft=c,s.scrollTop=l},desktopOverlay:function(e,t,n){var o=e.container;if(o._overlay&&!t)o.domNode.removeChild(o._overlay),o._overlay=null;else if(!o._overlay&&t){var i=f.getDesktopSize();n=n||"default",o._overlay=r.a.Canvas.Dom.createDomElement("div",{id:"ID_DesktopOverlay",style:"z-index: 65535; position:fixed; cursor:"+n+"; width:"+i.w+"px; height:"+i.h+"px; background-color:rgba( 225, 225, 225, 0 );",appendTo:o.domNode})}}}}(),u=d;const p={isTopLevelScreenWindow:!0,control:{left:0,top:0,handler:u},props:{Name:"DesktopWindow",Left:0,Top:0,Type:"DesktopWindow",ElementID:0}},m={createScreen:function(e,t){const n=g.getDesktopSize();return{core:e,domNode:e.domNode,domHtmlItems:e.domNode,gfxWebLib:e.gfxWebLib,isEnabled:!0,tabOrder:a.createTabOrder("TabIndex"),winManager:r.a.HmiTypes.Advanced.HmiWindowManager.createManager(),container:t,offsetLeft:0,offsetTop:0,items:[],props:{Left:0,Top:0,Width:n.w,Height:n.h,Type:"Screen"}}},onResized:function(e){const t=g.getDesktopSize();e.props.Width=t.w,e.props.Height=t.h}},g={createWindow:function(e){return r.a.jQL.extend({},p,{container:e})},createScreen:function(e,t){return m.createScreen(e,t)},onResize:function(e){u.onResized(e.toplevelWindow),m.onResized(e.popupScreen)},updateLayout:function(e,t){void 0!==t&&e.config.appType!==r.a.AppType.CLOUD&&(document.body.style["background-color"]=t)},getDesktopSize:function(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}};var f=g,h=n(1),v=n.n(h);var y=function(){var e=[],t=null,n=null,o=null,i=null,a=function(t){e.push(t)},s=function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},c=r.a.Config.PropertyEnums,l=function(e){if(!e.closed){if(e.countdown-=1,e.countdown<=0)return"function"==typeof e.functionToCall&&e.functionToCall(),void e.close();e.content.firstChild.lastChild.textContent=e.msg.replace("%d",e.countdown),window.setTimeout(function(){l(e)},1e3)}},d={easing:{linear:function(e){return e},quadratic:function(e){return Math.pow(e,2)},swing:function(e){return.5-Math.cos(e*Math.PI)/2},circ:function(e){return 1-Math.sin(Math.acos(e))},back:function(e,t){return Math.pow(e,2)*((t+1)*e-t)}},animate:function(e){var t=Date.now(),n=function(){var o=(Date.now()-t)/e.duration;o>1&&(o=1),e.progress=o;var r=e.delta(o);e.step(r),1===o?"function"==typeof e.complete&&e.complete():window.requestAnimationFrame(n)};window.requestAnimationFrame(n)},fadeOut:function(e,t){this.animate({duration:t.duration,delta:function(e){return e=this.progress,d.easing.swing(e)},complete:t.complete,step:function(t){e.style.opacity=1-t}})},fadeIn:function(e,t){this.animate({duration:t.duration,delta:function(e){return e=this.progress,d.easing.swing(e)},complete:t.complete,step:function(t){e.style.opacity=0+t}})}};return{closeActiveDialogs:function(){var t,n=e.slice(0),o=e.length;for(t=0;t<o;t+=1){var r=n[t];r.closeDialog?r.closeDialog():r.close()}},showMessage:function(e,t){var n,o,i,c=document.getElementById("ID_DesktopLayout");if(o={Caption:(t=r.a.jQL.extend({showCaption:!0,borderEnabled:!0,showModal:!0},t||{})).caption,Width:t.width||300,Height:t.height||120,BorderEnabled:t.borderEnabled,ShowCaption:t.showCaption,FrameCloseCallBack:function(){n.closed=!0,n.triggerElement.focus(),s(n),"function"==typeof t.close&&t.close()}},i=function(e){var n=r.a.Canvas.Dom.createDomElement("div",{}),o=r.a.Canvas.Dom.createDomElement("div",{style:"display:flex;align-items:center;display:-ms-flexbox;-ms-flex-align:center",appendTo:n});return t.icon&&r.a.Canvas.Dom.createDomElement("span",{style:"margin:10px;",class:t.icon,appendTo:o}),r.a.Canvas.Dom.createDomElement("p",{style:"margin:10px;font-family:Tahoma;font-size:18px;flex:1;-ms-flex:1",textNode:e,appendTo:o}),t.button&&r.a.Canvas.Dom.createDomElement("input",{id:"okButton",type:"button",style:"height:25px;",value:t.button.text||"OK",appendTo:n}),n},v.a){(n=new v.a.GenericDialog.Frame.HtmlDiv).triggerElement=document.activeElement,n.node=r.a.Canvas.Dom.createDomElement("div",{id:"ID_MessageDialog",style:"z-index: 65535; position: relative;",appendTo:c||document.body}),n.createFrame(n.node,o),n.content=i(e);var l=function(e){"okButton"===(e.target||e.srcElement||e.currentTarget).id&&("function"==typeof t.button.functionToCall&&t.button.functionToCall(),n.close())};return t.showModal?n.showModal(n.content,l):n.show(n.content,l),t.closeTimeout&&window.setTimeout(function(){n.closed||n.close()},t.closeTimeout),a(n),n}return null},showMessageForMSec:function(e,t){y.showMessage(e,{closeTimeout:t})},showMessageOnce:function(e,t){t=t||{},null===o&&(t.close=function(){o=null},o=y.showMessage(e,t))},showBarForMSec:function(e,t){var n=y.showMessage(e,{width:600,icon:"fa fa-info-circle fa-3x",showModal:!1});d.fadeOut(n.node,{duration:t||1e3,complete:function(){n.closed||n.close()}})},showReconnect:function(e,t,n){e=e.replace("</br>"," ");var o=y.showMessage(e.replace("%d",t),{width:400,showCaption:!1,icon:"fa fa-circle-o-notch fa-spin fa-3x"});o.msg=e,o.countdown=t||10,o.functionToCall=n,window.setTimeout(function(){l(o)},1e3)},showRuntimeDialogWithIcon:function(e,n,o){t=y.showMessage(e,{width:360,icon:n,caption:o,close:function(){t=null}})},hideRuntimeDialogWithIcon:function(){t&&t.close()},showOperationMotive:function(e,t){var o=document.getElementById("ID_DesktopLayout"),i={Caption:e,Width:480,Height:150,WindowMovingEnabled:!0,WindowCloseEnabled:!1,FrameCloseCallBack:function(){n.triggerElement.focus(),s(n),n=null}};v.a&&((n=new v.a.GenericDialog.Frame.HtmlDiv).triggerElement=document.activeElement,n.node=r.a.Canvas.Dom.createDomElement("div",{id:"ID_OperationMotiveDialog",appendTo:o||document.body}),n.createFrame(n.node,i),n.content=function(){var e=document.createElement("div");return r.a.Canvas.Dom.createDomElement("textarea",{autofocus:"autofocus",style:"width:445px;box-sizing:border-box;overflow:auto;resize:none;outline:none;",rows:"3",appendTo:e}),r.a.Canvas.Dom.createDomElement("input",{id:"okButton",type:"button",style:"width:84px;height:25px;margin-top:12px;margin-right:18px;float:right;",value:"OK",appendTo:e}),e}(),n.showModal(n.content,function(e){if("okButton"===(e.target||e.srcElement||e.currentTarget).id){if("function"==typeof t){var o=n.content.childNodes[0];t(o.value.replace(/(\r\n|\n|\r)/gm,""))}n.close()}}),a(n))},hideOperationMotive:function(){n&&n.close()},showHelp:function(){},showDateTimePicker:function(e,t){var n,o={},c=r.a.TextBib;if(i)return null;o.callBack=t.callback,o.defaultDate=t.defaultDate,o.timeZonePreference=void 0===t.timeZonePreference?1:t.timeZonePreference,o.timeFormat=c.getLocaliziedDateTimeFormat("TBID_NML_DF_IOField_Time"),o.dateFormat=c.getLocaliziedDateTimeFormat("TBID_NML_DF_IOField_Date"),o.timeMaxValue=t.type===r.a.Canvas.Converters.enumHmiFieldDataType.TimeSpan?2:1,o.type=t.type,o.startEndFlag=t.startEndFlag,o.endDate=t.endDate,o.optionsData=t.optionsData,o.projectVersion=t.projectVersion,o.screenProps=t.screenProps,(n=e.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindow(e)).isTopLevelScreenWindow?o.isParentDialogOrPopUp=!1:n.isPopupScreenWindow?o.isParentDialogOrPopUp=!0:o.isParentDialogOrPopUp=!1,o.topLevelScreenWindow=n;var l=new function(e){this.MonthsShort={0:e.getText("TBID_DateTimePicker_JAN_SHORT"),1:e.getText("TBID_DateTimePicker_FEB_SHORT"),2:e.getText("TBID_DateTimePicker_MAR_SHORT"),3:e.getText("TBID_DateTimePicker_APR_SHORT"),4:e.getText("TBID_DateTimePicker_MAY_SHORT"),5:e.getText("TBID_DateTimePicker_JUN_SHORT"),6:e.getText("TBID_DateTimePicker_JUL_SHORT"),7:e.getText("TBID_DateTimePicker_AUG_SHORT"),8:e.getText("TBID_DateTimePicker_SEP_SHORT"),9:e.getText("TBID_DateTimePicker_OCT_SHORT"),10:e.getText("TBID_DateTimePicker_NOV_SHORT"),11:e.getText("TBID_DateTimePicker_DEC_SHORT")},this.DayNamesShort={0:e.getText("TBID_DateTimePicker_SUN_SHORT"),1:e.getText("TBID_DateTimePicker_MON_SHORT"),2:e.getText("TBID_DateTimePicker_TUE_SHORT"),3:e.getText("TBID_DateTimePicker_WED_SHORT"),4:e.getText("TBID_DateTimePicker_THU_SHORT"),5:e.getText("TBID_DateTimePicker_FRI_SHORT"),6:e.getText("TBID_DateTimePicker_SAT_SHORT")}}(c),d={};if(d.days=l.DayNamesShort,d.months=l.MonthsShort,d.ok=c.getText("TBID_Submit"),d.cancel=c.getText("TBID_Cancel"),(i=new v.a.DTP.Control(o)).setLocale(d),r.a.Settings.showDTP=!0,r.a.Config.Browser.mozilla()){var u=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");u.setAttribute("width","100%"),u.setAttribute("height","100%"),e.domSvgNode.appendChild(u);var p=document.createElement("div");p.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),p.style.width=e.props.Width+"px",p.style.height=e.props.Height+"px",u.appendChild(p),i.show({target:p}),e.domSvgNode.removeChild(u)}else e.domNode.style.width=e.props.Width+"px",e.domNode.style.height=e.props.Height+"px",i.show({target:e.domNode});return i.onClose=function(e){r.a.Settings.showDTP=!1,s(e),i=null},a(i),i},showCCDialog:function(e,t,n,o,i){var a=r.a.Config.Properties,s=e.container,l=i.resizeable||i.resizable,d=e.control.handler.createDialogPage(e,{id:t,view:n,data:o,window:{Left:(a.getProp(s,"Width")-i.width)/2,Top:(a.getProp(s,"Height")-i.height)/2,Width:i.width,Height:i.height,Caption:i.caption||"",WindowFlags:c.HmiWindowFlag.ShowCaption|c.HmiWindowFlag.ShowBorder|c.HmiWindowFlag.AlwaysOnTop|(l?c.HmiWindowFlag.CanSize:0)|c.HmiWindowFlag.CanMove}});return d&&(d.container=s,d.domParent=s.domHtmlItems,d.domParent.appendChild(d.domNode),d.control&&(r.a.HmiTypes.Advanced.HmiWindowManager.register(s.winManager,d),r.a.HmiTypes.Advanced.HmiWindowManager.isAlwaysOnTop(d)&&r.a.HmiTypes.Advanced.HmiWindowManager.bringToFront(s.winManager,d)),d.activeItem=e.container.core.Interaction.Selection.getActiveItem(),e.container.core.Interaction.Selection.setActiveItem(d)),d},closeCCDialog:function(e){e.domParent.contains(e.domNode)&&e.domParent.removeChild(e.domNode),e.control&&r.a.HmiTypes.Advanced.HmiWindowManager.unregister(e.container.winManager,e),e.control.handler.onCleanUp(e),e.container.core.Interaction.Selection.getActiveItem()===e&&e.container.core.Interaction.Selection.setActiveItem(e.activeItem)}}}(),P=y,b=Object.freeze({HmiEventID:{Unknown:0,Activated:1e3,Deactivated:1001,Clicked:1003,Tapped:1003,KeyboardPressed:1006,KeyDown:1006,KeyboardReleased:1007,KeyUp:1007,LeftMouseButtonPressed:1008,Down:1008,RightMouseButtonPressed:1009,LeftMouseButtonReleased:1010,Up:1010,RightMouseButtonReleased:1011,ContextTapped:1011,GestureDetected:1012,InputFinished:1017,InputAccepted:1017,Loaded:1018,Unloaded:1019,SwitchedOn:1021,SwitchedOff:1022,ValueModified:1023,StateChanged:1025,Initialized:2001,ToolBarCommand:2002,Paused:4711,Playing:4712,Stopped:4713,DomainLogicChange:100003,OnScreenWindowClose:100004,OnRequestProcessValueChange:100005,OnRequestResourceListEntries:100006,OnResourceEntryChanged:100007,OnSelectedIndexChanged:100008,ClickedAndDefault:100009,OnRequestTextChange:100010},HmiEventParamID:{Unknown:0,X:1,Y:2,Modifiers:3,Trigger:4,Success:5,CommandId:6,Userdefined:7,KeyCode:8,isAlternate:9,Gesture:10,Value:11},HmiProjectPropertyID:{Unknown:0,CurrentLanguage:1,SystemState:2,LicensedType:3,LogoutWhenInactive:4,AutomaticLogoutTimeInMinutes:5,UserName:6},PwcEventType:{Unknown:0,HmiEvent:1,HmiProperty:2,DomainLogic:3,AsyncMethodResult:4,NFRTrace:5,HmiScreenItem:6,HmiPart:7,HmiProjectProperty:8,SystemFunction:9,Channel:10},PwcEventParamID:{Unknown:0,PropertyID:1,PropertyName:2,PropertyValue:3,PropertyNotify:4,PropertyPath:5,PropertyArray:6,GUID:7},PwcEventID:{Unknown:0,Create:1,Delete:2,Move:3},PwcSystemFunctionID:{Unknown:0,GetPropertyValue:1,SetPropertyValue:2,SetUpdateInterval:3,Heartbeat:4},PwcChannelFunctionID:{Open:1,Fire:2,Request:3,Subscribe:4,Unsubscribe:5,Close:6},GfxSystemState:{GFX_SYSTEM_STATE_INVALID:0,GFX_SYSTEM_STATE_NONE:1,GFX_SYSTEM_STATE_OPEN:2,GFX_SYSTEM_STATE_ACTIVE:3},HMILicenseType:{HMI_LICENSE_TYPE_NOLICENSE:0,HMI_LICENSE_TYPE_FULLCONTROL:1,HMI_LICENSE_TYPE_VIEWONLY:2,HMI_LICENSE_TYPE_DEMOMODE:3}}),S={GfxCHROMID:function(e){var t,n=e.split(" "),o=n.length;return function(){for(t=0;t<o;t++)this[n[t]]=arguments[t]}}("systemId objectId elementId subElementId instanceId attributeId"),toGfxCHROMID:function(e){var t=String(e).split(".");return 6===t.length?new S.GfxCHROMID(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3]),Number(t[4]),Number(t[5])):new S.GfxCHROMID(e)},toString:function(e){if(e instanceof S.GfxCHROMID){var t=e.systemId.toString();return void 0!==e.objectId&&(t+="."+e.objectId.toString()),void 0!==e.elementId&&(t+="."+e.elementId.toString()),void 0!==e.subElementId&&(t+="."+e.subElementId.toString()),void 0!==e.instanceId&&(t+="."+e.instanceId.toString()),void 0!==e.attributeId&&(t+="."+e.attributeId.toString()),t}return""}},T=S,w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjAxHK4kRQAACsVJREFUaEPtmHl0lNUZxm9IJhACBMgCJkTRikcRZF9CFgIhJEYSEkIkgIDsWFDbSikG8tStLYXaFingwqKyeSp6POF4GhQaqhbZQWQPENm3kJB9Zr7vfl+fO5MZInBkQkbrH+Sc50wm+Zbf+973vssV4u7PXQ/c9YDXPWCsFY2pR6ksuYZaLTrKVcLf6y/6MR5IaD+qF/WCXOsDuYZaJX6jvy+66+8Jvx/jnV59JsEjqRlynS/k1k6QX3WEvroRCD9Nf1e09erLvP0wgvtQoxg2kJvvhzyXCXl2GPT8e0H4XG2lyPD2O732PEIr+F4O+LxgyJMpMM4nUymQx5KgfRgEbYWAtlx09NpLvfkggrelfik/8Ifc3RvGxXSYRX1hfhcF40IG9P92gf1dP9jfERPtb4tW3nx3g59F8CbMNMlUjsyPYOgMg3FmAMwT3ajuMM4NgjydDu2jUNjeFi/a3hL9bW/+jDY0wTtQz8vVzDjHH6fHh8A82ctpQFF3mKe4Cle4CvvjQXgQfpp1qYhssOe88QCCt6CyFbz+xSOQxU8SuB8NIHhRD/5OQ870gXkxAbJsLOwb7gXhYV0shlJNvcHQoGcQvhvzfI7+cRDkqaHctImM+55OnSb8WcKfj4J5KQ5GKVfhRCqsK5ui5h9iVs0i8XCDXt7QmwnemHpGX8Ocv6MH5KVhhCasw+u9YZ7jJr4QDfNyLMzi/jBLkyCvjYa9oAsNaITqheLp6r8L34Zy3PH9hO/FCpurb2hD76cx9pOc4MrrFxhGF2NgXomDeTUe5rUEmGWJMKpGQCtKR82qYFT/Tcyt/uv/Ka0SPIyarq9l2tzXD0YxvX8+BvrZKGz6ZyeMyQrD0ORgpKeEYPK4CGzf0pfwyTCtDDPr07Bv7YvqRRZUvS6mVC0QQXfsxTu5keB+VALbgxz903CGThbDhN6nx61nYvBaTnvwuW75+zfC24s7Q9Y8AVPjSumjoBePRs3qNiD87Mr5Irryzz9hKBG8HTWV7QHk4QRuzuE0gHmf4WK/FI/5rzwIH5/rBjRt6ouVy7rBsKfBlCxwMotGTIRt9wAQHoSfUDFPtLkTZ9b7HoJbCB5PzdU/CYMsHQPj6uPOOC8dCL0kAW8seBi+vj7uFQgKsmDNqp4wFLzBUDOHwzCegqyagqq3WoLwORV/Ev0q/vgTFDeCR7Ap+5W2irF/nP1OGb1fOogblKoYDFmRzHDpBBU2rjAKCWmM9R/2IXSmA94h40kY2gTYvklCxQI/lP9BzCh/7SfoVgk/hIK+6UHIq6NgljOuywfDrOQeqGYVZpy/u7wrAgN93QaEhzdBXh6zkgOckjREY7thG8G9MBbVa9uD8Ch/VSTWOyTqcwPBg6lZ2tqm0I8wJVaOJDgzC8FNKw2xDXHE+bo1PdGqlcVtQPv7ApGfz1qg4HWGkC0dRjWzUUUaZPlTsO1IQPmCJih7Rcwse+lHzEhsh5NUS6xvfACyhN6vznCDq+xi6oSSGVi/vg9CQxu7DejQoRn+vYn1wE74Gl5TmQrj2hPcO2y3i4dCOzMCle/fh7KXBa79Xgyoj1M9vpbgkdRz9jWB0Av5YutoepLQteCO7GLQIDMTGzZEIyIiwG3Aox1b4KuCWNYBplAX+CWu4FlmsFMDIS9kwvr1AJTNC8A1iGepCI/BPLmQQ4iFGmxfLuZo+Zy0Kp+mN5n7taHOtKjAHdnFuUk/2xiL++8PdBvQrUsQthfEwCjhpr88mP3SIBinB0CeiIM8Gs1kMAj6d1moWBGJa7kip3SuSCydIyyesHl0DcHbUVPtyxg+J7n82jhnLDNc6oI7N2kmCjbH4SGGjSsL9e4ehD0FrNYXEyE5J8ii/pCFMawhUZDf9obc35cTXBps2wahNFeA8FNLc7y0CoT2o2KpOdpHzPvWKYzz7JvBFbwju2Tgy4I4dHykuduAfj1bYv/mPuyX4ultgh/pB3mA37/pxemtO+Quan8c9NMjUb4wBISfQ8WWvOiFukDwMI6B023L/Rj73HiS4ePI5bU5vU5adGQXxvk2hkuXzi3cBsT3bYnDn/d0hosLfA+7113d2MV2hdxO7eT3Yymwbk3kKvihZLaYToV5FCI/dBHhYzgGOgYRWcbQMZk6XcVIeVyFkp2hpLJLBcOrNAU7N0ehR5frBiREBaFwI2FVuOxV4PT4Dn5X4HW1LxrasUyUv9lOGYCS34nYBhnA4duf8DNsK/yhcRxUldM0uXndXs9g4apNi2W1aZFxfmpHNF7+dXuMTQ/D2LQQzH8hEpe3EFh5fectwF1GcKbQC9NQ/Vk/lORacHWWeJZqfMdGEL6zmmHtH4dDvzySrcAYZ5y7ixHTYhmLVwkrMLtR4zzHRsa5/Vgsinf0waFPu+LAJ51Q/J+u0JTHXeFyo+frfj8wAPZvU1G2sK0yAFd/Kx67IwM4eAcQfoJtmQXaTmYQbRI3KL3vqqLlBGe4uMFVWjzJjXgkGkf/1Q3j0kPRnO1EYEAjjEhshW8/eBj6thtC5laG7OLGPpGOqryeKMnxUwZMoALqbQQN6EzNtK1rDf1SNlsEFq4ablIV56oYFbOYMVyMMyxEddJi5c5eeO3ZdvC3XO9G/diZ5oxvg/Itj90c9zcaoVbq4EDY9qeidF4rZcBMqnO9DLAtFQE8OUincu1bunAQmcjskglDeZ2ts3GJxeicM1zk8djvpcWSL7pixojQ7w00qh5MSAvGlc851PxQ+Lj+t6cv9KJMVKztqAzIpYZSTTw2wrpEtKemW5fwqORcNivvKIYLvX5FxXltFWW4yGNMiwdZhPZfzy62r7vivZfuQ0hLP7cRLZv5YunsSFh5OueRATuYpQ4ncRXSuA98lBHPUPd6ZADBLdRAntnk2vLYtFVOYriogZ3gKlxc4Idqq+he5vcb0qICzV/0C4xPbY0xKa2R9/oDqP7SQ3jXKuyNgn5mJMoWt3OtQhyNuP3xPMGDqHE1S3yhHUhm18n4P89B5VRt78JN6vC6qqKOtOjK6TenRztXQ+lmr6tr68iRoZTUs2q1m88vHIKagnjXKmTTgOa3XQUeOIVQz1nfCWBpVwPHaMiL6pg8nUakOk6dZSHPd47wvPMQ9wE3nDygRANvEvfIAaVb/Y/3qHsPqmdQh/i8w+yVjtBZR5KhsyrrRcM4sTGMZjdSqzCJuv2hcM0boiU1SR08WfM6wL4tBvZdA2Hfl8T8nALtYCq0w+zhj2awag6DVjgc2vEsaCfVeU82P+vo1ChoSu6/8Rr1+3F+FmbBfnQ47IeHwX4wwxHvtr1PwLozma31INRs6Y/q/CiGUISrHqgVaHb7FVgofHla1p2HTs/z0Gkuz23U0Yfr9EAN4ODwrWZY1xjoGEQ4SalhRPXzqiUGW2LVVarGDGzKnK2Bsz1wAjmLlCfK4XXTqIcon9saoC4gvIXwHQifWPUXkVE1X2Tx6COb8KN5ejCG8OM4w47nDDuBY+BEwk8i/GTCO0T4yYSfQnjVFk8l+BRqMuEnX1WaRTlDYmJtoRrPz3HUGGo0pbw9nMqg4qlIqpFH8HUvogE+9L6FZzcBlfNEc8IH0futaEAw4UMJH0bvt6EBbWnAPYQPp/fDaUA4DQgnfDt6P4Lw4YR3iPBK9xCoLdWGCqNCqWAV41SQ2qxUAGXx2Ov1tu7uDXc9cNcDPwsP/A/3rZlSOKYxQgAAAABJRU5ErkJggg==",I=function(e){return{create:function(t,n){var o=new r.a.GfxWebLib(r.a.AppMode.RUNTIME,t);n=n||document.getElementById("ID_MainDiv"),o.tooltip.handler={show:e.Tooltip.show,hide:e.Tooltip.hide,suspend:e.Tooltip.suspend,resume:e.Tooltip.resume},o.dialogs.handler={showRuntimeDialogWithIcon:P.showRuntimeDialogWithIcon,hideRuntimeDialogWithIcon:P.hideRuntimeDialogWithIcon,showOperationMotive:P.showOperationMotive,hideOperationMotive:P.hideOperationMotive,showHelp:P.showHelp,showCCDialog:P.showCCDialog,closeCCDialog:P.closeCCDialog,showDateTimePicker:P.showDateTimePicker},o.interaction.handler={addEvents:e.Interaction.addEvents,removeEvents:e.Interaction.removeEvents,setCapture:e.Interaction.setCapture,releaseCapture:e.Interaction.releaseCapture,checkPermission:e.Interaction.checkPermission,evtX:e.Interaction.evtX,evtY:e.Interaction.evtY},o.input.handler={startInput:e.Interaction.Input.startInput,endInput:e.Interaction.Input.endInput,isInputActive:e.Interaction.Input.isInputActive,checkHandleInputEnd:e.Interaction.Input.checkHandleInputEnd},o.keyboard.handler={getKeycodes:e.Interaction.Keyboard.getKeycodes,getFlags:e.Interaction.Keyboard.getFlags},o.cursor.handler={suspendCursor:e.Interaction.Cursor.suspendCursor},o.selection.handler={getActiveItem:e.Interaction.Selection.getActiveItem,setActiveItem:e.Interaction.Selection.setActiveItem,selectNextItem:e.Interaction.Selection.selectNextItem,selectPreviousItem:e.Interaction.Selection.selectPreviousItem},o.connection.handler={datatypesToGfxCHROMID:T.toGfxCHROMID,datatypesToString:T.toString,getEventIDs:function(){return b.HmiEventID},getEventParamIDs:function(){return b.HmiEventParamID},getAppDir:function(){return e.config.appDir},getCustomControlUrl:function(){return e.config.customControlUrl},getCustomWidgetUrl:function(){return e.config.customWidgetUrl},getImageUrl:function(){return e.config.imageUrl},getTemplateUrl:function(){return e.config.templateUrl},sendEvent:e.Notifier.sendEvent,sendToolBarCommand:e.Notifier.sendToolBarCommand,sendEventByName:e.Notifier.sendEventByName,sendTappedEvent:e.Notifier.sendTappedEvent,sendGestureEvent:e.Notifier.sendGestureEvent,sendPropertyByName:e.Notifier.sendPropertyByName,sendPropertiesByName:e.Notifier.sendPropertiesByName,sendPartPropertyByName:e.Notifier.sendPartPropertyByName,sendPartPropertiesByName:e.Notifier.sendPartPropertiesByName,setPropertyValue:e.Notifier.setPropertyValue,sendDomainLogicEvent:e.Notifier.sendDomainLogicEvent,sendAsyncMethodResult:e.Notifier.sendAsyncMethodResult,sendScreenItemCreate:e.Notifier.sendScreenItemCreate,sendScreenItemDelete:e.Notifier.sendScreenItemDelete,sendPartCreate:e.Notifier.sendPartCreate,sendPartDelete:e.Notifier.sendPartDelete,sendPartMove:e.Notifier.sendPartMove},o.flashing.handler={getFlashingRates:e.Flashing.getFlashingRates,setRemoveItemSpecificFlashing:e.Flashing.setRemoveItemSpecificFlashing},o.topLevelScreenWindow.handler={getTopLevelScreenWindow:u.getTopLevelScreenWindow,enumScreens:function(t,n,o){return u.enumScreens(e,t,n,o)}},o.screen.handler={getItem:l.getItem,enumItems:l.enumItems,getCalculatedZoomFactor:l.getCalculatedZoomFactor},o.umcservice.handler=e.options.UmcService?{getServiceEndpoint:e.options.UmcService.getServiceEndpoint,init:e.options.UmcService.init,getKey:e.options.UmcService.getKey}:{},o.channelregistry.handler=e.options.Channels?{browse:e.options.Channels.browse,open:e.options.Channels.open}:{};var i={};return e.options.cldrDataPath&&(i.cldrDataPath=e.options.cldrDataPath),o.init(n,i),o.addHmiObjectHandler("Screen",l),function(e){var t={gfxWebLib:e};e.overlayContent.imageHelper=new r.a.Canvas.ImageHelper,e.overlayContent.qualityImage=w,e.overlayContent.imageHelper.loadImage(t,w,e.cbSetImageSize)}(o),o}}},C=Object.freeze({NONE:0,CTRL:1,SHIFT:2,ALT:4}),D=function(e){return(e.shiftKey?C.SHIFT:0)+(e.ctrlKey?C.CTRL:0)+(e.altKey?C.ALT:0)},E=function(){var e=r.a.Config.PropertyEnums,t=r.a.Settings,n=["","webkit","Moz","moz","MS","ms"],o={autoStart:!0,hold_timeout:1e3,hold_threshold:2,callbacks:{}},i=null,a=/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,s="ontouchstart"in window,c=s&&a,l=void 0!==function(e,t){for(var o,r,i=t[0].toUpperCase()+t.slice(1),a=0;a<n.length;){if((r=(o=n[a])?o+i:t)in e)return r;a++}}(window,"PointerEvent"),d=function(){var e=function(e){return!!t.useMultiTouch||e.isPrimary};return{down:function(t,n){if(e(n))return t.options.callbacks.down&&t.options.callbacks.down(n)&&n.stopPropagation(),!0},move:function(t,n){if(e(n))return t.options.callbacks.move&&t.options.callbacks.move(n),!0},up:function(t,n){if(e(n))return t.options.callbacks.up&&t.options.callbacks.up(n),!0},enter:function(t,n){if(e(n))return t.options.callbacks.enter&&t.options.callbacks.enter(n)&&n.stopPropagation(),!0},leave:function(t,n){if(e(n))return t.options.callbacks.leave&&t.options.callbacks.leave(n)&&n.stopPropagation(),!0}}}();function u(e,t,n,o){e.addEventListener&&e.addEventListener(t,n,o)}function p(e,t,n,o){e.removeEventListener&&e.removeEventListener(t,n,o)}function m(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function g(e){return e.which?e.button+16:0}var f=function(e){this.inst=e,this.rtpu=e.options.rtpuMode,this.upEvent=!1,this.inside=!0;var t=this;this.mousedown=function(e){var n=t.prepareEvent(e);d.down(t.inst,n),t.rtpu?u(document,"mouseup",t.mouseup,!0):(u(t.inst.elem,"mouseleave",t.mouseup),u(t.inst.elem,"mouseup",t.mouseup)),t.upEvent=!0,t.inside=!0},this.mousemove=function(e){var n=t.prepareEvent(e);d.move(t.inst,n)},this.mouseup=function(e){var n=t.prepareEvent(e);d.up(t.inst,n),t.rtpu?p(document,"mouseup",t.mouseup,!0):(p(t.inst.elem,"mouseleave",t.mouseup),p(t.inst.elem,"mouseup",t.mouseup)),t.upEvent=!1},this.mouseenter=function(e){var n=t.prepareEvent(e);d.enter(t.inst,n),t.inside=!0},this.mouseleave=function(e){var n=t.prepareEvent(e);d.leave(t.inst,n),t.inside=!1}};f.prototype={prepareEvent:function(e){var t=D(e),n=!1;return"mouseup"===e.type&&(n=!this.rtpu||this.inside),{x:Math.round(e.pageX),y:Math.round(e.pageY),currentTarget:this.inst.elem,target:e.target,button:e.button,which:e.which,trigger:g(e),pointerId:1,isPrimary:!0,flags:t,click:n,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}}},registerHandlers:function(){u(this.inst.elem,"mousedown",this.mousedown),u(this.inst.elem,"mouseenter",this.mouseenter),u(this.inst.elem,"mouseleave",this.mouseleave),this.rtpu&&u(this.inst.elem,"mousemove",this.mousemove)},unregisterHandlers:function(){p(this.inst.elem,"mousedown",this.mousedown),p(this.inst.elem,"mouseenter",this.mouseenter),p(this.inst.elem,"mouseleave",this.mouseleave),this.rtpu&&p(this.inst.elem,"mousemove",this.mousemove),this.upEvent&&(this.rtpu?p(document,"mouseup",this.mouseup,!0):(p(this.inst.elem,"mouseleave",this.mouseup),p(this.inst.elem,"mouseup",this.mouseup)),this.upEvent=!1)},setCapture:function(){u(this.inst.elem,"mousemove",this.mousemove,!0)},releaseCapture:function(){p(this.inst.elem,"mousemove",this.mousemove,!0)}};var h=function(e){this.inst=e,this.rtpu=e.options.rtpuMode,this.upEvent=!1,this.inside=!0;var t=this;this.touchstart=function(e){u(t.inst.elem,"touchmove",t.touchmove),u(t.inst.elem,"touchend",t.touchend),u(t.inst.elem,"touchcancel",t.touchend),t.upEvent=!0,t.inside=!0,t.inst.timeStamp=e.timeStamp;var n=t.getPointer(e);n&&(t.inst.pointerId=n.pointerId,d.enter(t.inst,n),d.down(t.inst,n))},this.touchmove=function(e){var n=t.getPointer(e);if(n){if(t.inst.pointerId!==n.pointerId)return;d.move(t.inst,n),t.inst.capture||(m(document.elementFromPoint(n.clientX,n.clientY),t.inst.elem)?(t.inside||d.enter(t.inst,n),t.inside=!0):(t.rtpu?d.leave(t.inst,n):t.touchend(e),t.inside=!1))}},this.touchend=function(e){var n=t.getPointer(e);n&&(t.inside&&d.leave(t.inst,n),d.up(t.inst,n)),p(t.inst.elem,"touchmove",t.touchmove),p(t.inst.elem,"touchend",t.touchend),p(t.inst.elem,"touchcancel",t.touchend),t.upEvent=!1}};h.prototype={getPointer:function(e){var t=e.changedTouches;return t.length?this.touchToPointer(e,t[0]):null},isPrimaryTouch:function(e,t){return e.touches.length<2},touchToPointer:function(t,n){var o=!1,r=0;"touchend"===t.type&&(m(function(e){return e.target.ownerDocument.elementFromPoint(e.clientX,e.clientY)}(n)||n.target,this.inst.elem)&&(o=!0,t.timeStamp-this.inst.timeStamp>this.inst.options.hold_timeout&&(r=2)));return{x:Math.round(n.pageX),y:Math.round(n.pageY),clientX:n.clientX,clientY:n.clientY,currentTarget:this.inst.elem,target:n.target,pointerId:n.identifier,isPrimary:this.isPrimaryTouch(t,n),button:r,which:1,trigger:e.HmiEventTrigger.Touch,flags:0,click:o,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}}},registerHandlers:function(){u(this.inst.elem,"touchstart",this.touchstart)},unregisterHandlers:function(){p(this.inst.elem,"touchstart",this.touchstart),this.upEvent&&(p(this.inst.elem,"touchmove",this.touchmove),p(this.inst.elem,"touchend",this.touchend),p(this.inst.elem,"touchcancel",this.touchend),this.upEvent=!1)},setCapture:function(){this.inst.capture=!0,u(this.inst.elem,"touchmove",this.touchmove,!0)},releaseCapture:function(){this.inst.capture=!1,p(this.inst.elem,"touchmove",this.touchmove,!0)}};var v=function(e){this.inst=e,this.rtpu=e.options.rtpuMode,this.item=e.options.item,this.upEvent=!1,this.inside=!0,this.cancel=!1,this.closure=(()=>{this.cancel=!0});var n=this;this.pointerdown=function(e){var o=n.prepareEvent(e);n.inst.pointerId=e.pointerId,n.inst.timeStamp=e.timeStamp,t.zoomOnPoint&&n.item&&n.inst.registerEvent(n.closure,e.isPrimary),d.down(n.inst,o)&&(n.rtpu?u(document,"pointerup",n.pointerup,!0):("mouse"!==e.pointerType?u(n.inst.elem,"pointermove",n.pointermove):u(n.inst.elem,"pointerleave",n.pointerup),u(n.inst.elem,"pointerup",n.pointerup)),n.upEvent=!0,n.inside=!0,n.cancel=!1)},this.pointermove=function(e){var t=n.prepareEvent(e);d.move(n.inst,t)&&"mouse"!==e.pointerType&&(m(document.elementFromPoint(e.clientX,e.clientY),n.inst.elem)?(n.inside||d.enter(n.inst,t),n.inside=!0):(n.rtpu?d.leave(n.inst,t):n.pointerup(e),n.inside=!1))},this.pointercapture=function(e){var t=n.prepareEvent(e);t.pointerId===n.inst.pointerId&&d.move(n.inst,t)},this.pointerup=function(e){t.zoomOnPoint&&n.item&&n.inst.unregisterEvent(n.closure);var o=e.type;"pointerleave"===o&&r.a.Settings.showDTP&&(o="pointerup");var i=n.prepareEvent(e,o);i.pointerId===n.inst.pointerId&&d.up(n.inst,i)&&(n.rtpu?p(document,"pointerup",n.pointerup,!0):("mouse"!==e.pointerType?p(n.inst.elem,"pointermove",n.pointermove):p(n.inst.elem,"pointerleave",n.pointerup),p(n.inst.elem,"pointerup",n.pointerup)),n.upEvent=!1)},this.pointerenter=function(e){var t=n.prepareEvent(e);d.enter(n.inst,t),n.inside=!0},this.pointerleave=function(e){var t=n.prepareEvent(e);d.leave(n.inst,t),n.inside=!1}};function y(e,t){this.running=!1,this.elem=e,this.options=Object.assign({},o,t),this.input=new i(this),this.options.autoStart&&this.start()}return v.prototype={getTrigger:function(t){return"mouse"===t.pointerType?g(t):e.HmiEventTrigger.Touch},getButton:function(e){return"mouse"===e.pointerType?e.button:0},getWhich:function(e){return"mouse"===e.pointerType?1&e.buttons?1:2&e.buttons?3:4&e.buttons?2:0:1},preventDefault:function(e){e.cancelable&&e.preventDefault()},prepareEvent:function(e,t){var n=D(e),o=this.getButton(e),r=!1;return"pointerup"===(t=t||e.type)&&(this.cancel||(r=this.inside)&&"mouse"!==e.pointerType&&e.timeStamp-this.inst.timeStamp>this.inst.options.hold_timeout&&(o=2)),{x:Math.round(e.pageX),y:Math.round(e.pageY),currentTarget:this.inst.elem,target:e.target,button:o,which:this.getWhich(e),trigger:this.getTrigger(e),pointerId:e.pointerId,isPrimary:e.isPrimary,defaultPrevented:e.defaultPrevented,flags:n,click:r,item:this.item,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}}},registerHandlers:function(){u(this.inst.elem,"pointerdown",this.pointerdown),u(this.inst.elem,"pointercancel",this.pointerup),u(this.inst.elem,"pointerenter",this.pointerenter),u(this.inst.elem,"pointerleave",this.pointerleave),this.rtpu&&(u(this.inst.elem,"pointermove",this.pointermove),s&&u(this.inst.elem,"touchstart",this.preventDefault))},unregisterHandlers:function(){p(this.inst.elem,"pointerdown",this.pointerdown),p(this.inst.elem,"pointercancel",this.pointerup),p(this.inst.elem,"pointerenter",this.pointerenter),p(this.inst.elem,"pointerleave",this.pointerleave),this.rtpu&&(p(this.inst.elem,"pointermove",this.pointermove),s&&p(this.inst.elem,"touchstart",this.preventDefault)),this.upEvent&&(this.rtpu?p(document,"pointerup",this.pointerup,!0):(p(this.inst.elem,"pointermove",this.pointermove),p(this.inst.elem,"pointerleave",this.pointerup),p(this.inst.elem,"pointerup",this.pointerup)),this.upEvent=!1)},setCapture:function(){u(this.inst.elem,"pointermove",this.pointercapture,!0),u(this.inst.elem,"pointerleave",this.pointerleave)},releaseCapture:function(){p(this.inst.elem,"pointermove",this.pointercapture,!0),p(this.inst.elem,"pointerleave",this.pointerleave)}},y.prototype={set:function(e){return Object.assign(this.options,e),this},start:function(){return this.running?this:(this.running=!0,this.input.registerHandlers(),this)},stop:function(){return this.running?(this.running=!1,this.input.unregisterHandlers(),this):this},setCapture:function(){return this.input.setCapture&&this.input.setCapture(),this},releaseCapture:function(){return this.input.releaseCapture&&this.input.releaseCapture(),this},registerEvent:function(e,t){var n=this.options.item;r.a.HmiTypes.Utils.isScreen(n)?n.handler.registerEvent(n,e,t):n.container&&n.container.handler&&r.a.HmiTypes.Utils.isScreen(n.container)&&n.container.handler.registerEvent(n.container,e,t)},unregisterEvent:function(e){var t=this.options.item;r.a.HmiTypes.Utils.isScreen(t)?t.handler.unregisterEvent(t,e):t.container&&t.container.handler&&r.a.HmiTypes.Utils.isScreen(t.container)&&t.container.handler.unregisterEvent(t.container,e)}},i=function(){var e=f;return l?e=v:c&&(e=h),e}(),{createInstance:function(e,t){return new y(e,t||{})},isMobile:a,hasParent:m,isPrimary:function(e){return i===v?e.isPrimary:i!==h||e.touches.length<2},mapMouseEventName2PointerEventName:function(e){return{click:"click",dblclick:"dblclick",mousedown:"pointerdown",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mousemove:"pointermove",mouseenter:"pointerenter",mouseleave:"pointerleave",mousecancel:"pointercancel"}[e]},mapMouseEventName2TouchEventName:function(e){return{click:"click",dblclick:"dblclick",mousedown:"touchstart",mouseup:"touchend",mouseover:"mouseover",mouseout:"mouseout",mousemove:"touchmove",mouseenter:"mouseenter",mouseleave:"mouseleave",mousecancel:"touchcancel"}[e]},mapEventName:function(e){return i===v?e=E.mapMouseEventName2PointerEventName(e):i===h&&(e=E.mapMouseEventName2TouchEventName(e)),e}}}(),H=E,O=function(e){return function(e){var t="x",n="x",o=!1,i="x",a="x";return{curNoInput:"NoInput.CURS",setCursor:function(i,a,s,c){if(!(!(c=void 0!==c&&c)&&o||a===t&&s===n||(t=a,n=s,H.isMobile)))if(a)i.style.cursor=s;else{var l=e.config.appDir+"content/systemdata/";r.a.Config.Browser.msie()||r.a.Config.Browser.edge()?i.style.cursor="url("+l+s+"), default":i.style.cursor="url("+l+s+") 6 6, default"}},suspendCursor:function(r,s,c,l){s?(o||(i=t,a=n),e.Interaction.Cursor.setCursor(r,c,l,!0),o=s):(o=s,e.Interaction.Cursor.setCursor(r,i,a))}}}(e)},M=function(e){var t=null,n=null,o=function(e){if(e&&e.container){if(!r.a.HmiTypes.Utils.isScreenContainer(e)){if(!r.a.HmiTypes.Utils.isScreen(e)){return(e.groupContainer||e.container).container}return e.container}return e}},i=function(t,n){t&&(r.a.HmiTypes.HmiObject.clearSelectionProps(t),e.Notifier.sendEvent(t.rtoid,b.HmiEventID.Deactivated),r.a.HmiTypes.HmiObject.onFocusOut(t,n))},s=function(t,n){t&&(r.a.HmiTypes.HmiObject.setSelectionProps(t),e.Notifier.sendEvent(t.rtoid,b.HmiEventID.Activated),r.a.HmiTypes.HmiObject.onFocus(t,n))},c=function(c,l,d){var u=c!==l;if(l){if(!l.container)return;switch(l.props.Type){case"Screen":case"FaceplateType":n=l,r.a.HmiTypes.HmiObject.hasActions(l)||n.tabOrder.lastSelectedItem&&(u=c!==(l=n.tabOrder.lastSelectedItem));break;default:n=l.groupContainer||l.container,a.gotoObject(n.tabOrder,l)||r.a.HmiTypes.HmiObject.canActivate(l)||(u=n.tabOrder.lastSelectedItem?c!==(l=n.tabOrder.lastSelectedItem):c!==(l=n))}}u&&function(t,n,r){var a=o(t),c=o(n);a!==c?(i(t,r),a&&a.handler.onFocusOut&&(a.handler.onFocusOut(a),a!==t&&e.Notifier.sendEvent(a.rtoid,b.HmiEventID.Deactivated)),c&&c.handler.onFocus&&(c.handler.onFocus(c),c!==n&&e.Notifier.sendEvent(c.rtoid,b.HmiEventID.Activated)),s(n,r)):(t!==a&&i(t,r),s(n,r))}(c,l,d),t=l},l=function(e){var t,n;return r.a.HmiTypes.Utils.isScreenContainer(e)&&r.a.Config.Properties.getProp(e,"TabIntoWindow")&&(t=e.screen)?((n=a.gotoFirst(t.tabOrder))&&r.a.HmiTypes.Utils.isScreenContainer(n)&&(n=l(n)),n||t):e};return{onPointerDown:function(t,n,o,r,i,a){this.setActiveItem(t),t&&e.Notifier.sendPointerDownEvent(t.rtoid,n,o,r,i,a)},onPointerUp:function(t,n,o,r,i,a,s){t&&(e.Notifier.sendPointerUpEvent(t.rtoid,n,o,r,i,s),a&&e.Notifier.sendTappedEvent(t.rtoid,n,o,r,i,s))},checkHandleSelectionEnd:function(e){if(t&&t.container===e){const t=e.core.toplevelWindow.screen;this.initializeActiveItem(t.tabOrder.lastSelectedItem||t)}},initializeActiveItem:function(o){if(o)o=l(o),r.a.HmiTypes.Utils.isScreenContainer(o)&&""!==o.props.Screen&&r.a.Config.Properties.getProp(o,"TabIntoWindow")?window.setTimeout(function(){o.container&&this.initializeActiveItem(o)},50):c(null,o);else if(n){var i=a.gotoNext(n.tabOrder);i||(n!==e.popupScreen?n.handler.enumItems(n,null,function(e){if(r.a.HmiTypes.HmiObject.canActivate(e))return i=e,!0}):(n=e.toplevelWindow.screen,i=n.tabOrder.lastSelectedItem),i||(i=n)),i=l(i),c(t,i)}},setActiveItem:function(e){c(t,e)},getActiveItem:function(){return t},getActiveScreen:function(){return n},getActiveItemOrScreen:function(){return t||n},getActiveWindow:function(){return t&&r.a.HmiTypes.Utils.isScreenWindow(t)?t:n?n.container:null},selectNextItem:function(e){if(n){var o=a.gotoNext(n.tabOrder);o&&(o=l(o),c(t,o,e))}},selectPreviousItem:function(e){if(n){var o=a.gotoPrev(n.tabOrder);o&&(o=l(o),c(t,o,e))}},selectNextRootItem:function(){let e=!1;if(n){let o=n.container;if("ScreenWindow"===r.a.Config.Properties.getProp(o,"Type")){let n=o.container,r=null;a.gotoObject(n.tabOrder,o),(r=a.gotoNext(n.tabOrder))&&(r=l(r),c(t,r,!0),e=!0)}}return e},selectPreviousRootItem:function(){let e=!1;if(n){let o=n.container;if("ScreenWindow"===r.a.Config.Properties.getProp(o,"Type")){let n=o.container,r=null;a.gotoObject(n.tabOrder,o),(r=a.gotoPrev(n.tabOrder))&&(r=l(r),c(t,r,!0),e=!0)}}return e}}},W=function(e){return M(e)},N=function(e){var t=r.a.Config.PropertyEnums,n=Object.freeze({TAB:9,ENTER:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,ADD:107,SUBTRACT:109}),o=Object.freeze({NONE:0,CTRL:1,SHIFT:2,ALT:4}),i=function(e){return(e.shiftKey?o.SHIFT:0)+(e.ctrlKey?o.CTRL:0)+(e.altKey?o.ALT:0)},a=function(e,t){const n=r.a.Config.Properties.getProp(e,"ToolBar",0,null);if(n&&n.Elements&&n.Enabled){var o=function(e,t,n){for(let o=0;o<e.length;o++)if(e[o][t]===n)return e[o]}(n.Elements,"HotKey",t);if(o&&0===o.Operability)return{Item:e,Part:o}}return null},s=function(e,t){let n;if(!e||!e.props)return null;switch(e.props.Type){case"Button":case"ToggleSwitch":if(r.a.Config.Properties.getProp(e,"HotKey")===t)return{Item:e};break;case"Screen":case"FaceplateType":if(!e.items||e.items.length<0)return null;for(let o=0;o<e.items.length;o++)if(!r.a.HmiTypes.Utils.isScreenContainer(e.items[o])&&(n=s(e.items[o],t)))return n;if(!n)for(let o=0;o<e.items.length;o++)if(r.a.HmiTypes.Utils.isScreenContainer(e.items[o])){const r=e.items[o].screen;if(r&&(n=s(r,t)))return n}break;case"ScreenWindow":case"FaceplateContainer":case"TopLevelScreenWindow":case"PopupScreenWindow":if(n=s(e.screen,t))return n;break;default:if(e.control)return a(e,t)}return null},c=function(e,t,n){let o;if(!t)return null;switch(t.props.Type){case"Screen":case"FaceplateType":if(t.items){for(let r=0;r<t.items.length;r++)if(t.items[r]!==e&&(o=s(t.items[r],n)))return o;if(!o)for(let i=0;i<t.items.length;i++)if(r.a.HmiTypes.Utils.isScreenContainer(t.items[i])&&t.items[i]!==e){const r=t.items[i].screen;if(r&&(o=c(e,r,n)))return o}}break;case"ScreenWindow":case"FaceplateContainer":case"TopLevelScreenWindow":case"PopupScreenWindow":if(o=c(e,t.screen,n))return o;break;default:if(t.control)return a(t,n)}return null},l=function(t,o){var r=!1;switch(t){case n.TAB:r=function(t){return e.Interaction.Input.endInput(!0),t?e.Interaction.Selection.selectPreviousItem(!0):e.Interaction.Selection.selectNextItem(!0),!0}(o.shiftKey);break;case n.ENTER:o.shiftKey&&(r=function(){let t=!1;return e.Interaction.Input.endInput(!0),t=e.Interaction.Selection.selectNextRootItem()}());break;case n.ESC:o.shiftKey&&(r=function(){let t=!1;return e.Interaction.Input.endInput(!0),t=e.Interaction.Selection.selectPreviousRootItem()}())}return r};return{getKeycodes:function(){return n},getFlags:function(){return o},calculateFlags:i,onKeyDown:function(o){var a,d=!1,u=o.repeat,p="which"in o?o.which:o.keyCode,m=i(o);o.ctrlKey&&83===p&&o.preventDefault(),(a=e.Interaction.Selection.getActiveItemOrScreen())&&a.handler.checkInnerNavigation&&(d=a.handler.checkInnerNavigation(a,p,u,m)),p&&!d&&(d=l(p,o))&&o.preventDefault(),a&&!d&&r.a.Config.Properties.getProp(a,"Enabled")&&(e.Interaction.checkPermission(a,!0)&&(d=r.a.HmiTypes.HmiObject.onKeyDown(a,p,u,m),u||(p!==n.ENTER&&p!==n.SPACE||e.Notifier.sendPointerDownEvent(a.rtoid,0,0,0,m,p===n.ENTER?t.HmiEventTrigger.Enter:t.HmiEventTrigger.Space),e.Notifier.sendKeyboardPressedEvent(a.rtoid,p,u,m))),d&&o.preventDefault()),d||u||(d=function(t,n){let o=!1;const i=(65280&t)>>>8;let a=s(n,t),l=n;for(;!a&&l&&!l.isTopLevelScreenWindow&&!l.isPopupScreenWindow;)a=c(n,l,t),n=l,l=l.container;if(!a&&l){const n=e.SOMManager.getScreenWindows().filter(e=>"TopLevelScreenWindow"===e.props.Type||"PopupScreenWindow"===e.props.Type);for(let e=0,o=n.length;e<o&&!a;e++)l.rtoid!==n[e].rtoid&&(a=s(n[e],t))}return a&&0===r.a.Config.Properties.getProp(a.Item,"Operability")&&(a.Part&&0===r.a.Config.Properties.getPropPart(a.Part,a.Part.Type,"Operability")?(a.Item.control.handler.onToolbarButton(a.Item,a.Part.Mapping),255&a.Part.Mapping&&a.Item.gfxWebLib&&a.Item.gfxWebLib.connection.sendToolBarCommand(a.Item.rtoid,a.Part.Mapping,!1)):e.Notifier.sendTappedEvent(a.Item.rtoid,0,0,0,i),o=!0),o}((m<<8)+p,a))&&o.preventDefault();return d||(a=e.Interaction.Selection.getActiveWindow())&&(d=r.a.HmiTypes.HmiObject.onKeyDown(a,p,u,m))&&o.preventDefault(),!d},onKeyUp:function(o){var a,s=!1,c=o.repeat,l="which"in o?o.which:o.keyCode,d=i(o);return(a=e.Interaction.Selection.getActiveItemOrScreen())&&r.a.Config.Properties.getProp(a,"Enabled")&&(e.Interaction.checkPermission(a,!1)&&(s=r.a.HmiTypes.HmiObject.onKeyUp(a,l,c,d),c||(e.Notifier.sendKeyboardReleasedEvent(a.rtoid,l,c,d),l!==n.ENTER&&l!==n.SPACE||(e.Notifier.sendPointerUpEvent(a.rtoid,0,0,0,d,l===n.ENTER?t.HmiEventTrigger.Enter:t.HmiEventTrigger.Space),e.Notifier.sendTappedEvent(a.rtoid,0,0,0,d,l===n.ENTER?t.HmiEventTrigger.Enter:t.HmiEventTrigger.Space)))),s&&o.preventDefault()),!s}}},A=function(e){return N(e)},B=function(e){return{onMouseWheel:function(t){var n=e.Interaction.Keyboard.calculateFlags(t),o=function(){let t=e.Interaction.Selection.getActiveWindow();for(;t&&-1===t.props.Type.indexOf("ScreenWindow");)t=t.container.container;return t}(),i=t.deltaY||t.deltaX||1,a=!1;if(o&&o.handler.onMouseWheel){if(r.a.Settings.zoomOnPoint){var s={};e.Interaction.getRelEventPosInScreenAndItem(t,o,{},s),s.x-=o.control.left,s.y-=o.control.top,a=o.handler.onMouseWheel(o,i,n,s)}else a=o.handler.onMouseWheel(o,i,n);a&&t.preventDefault()}return a}}},k=function(e){return B(e)},x=function(e){var t=null,n=null,o=null,i=null,a="",s="",c=null,l=function(e){var r,s;null!==t&&((r=document.getElementById(a))&&(s=r.value.replace(/\r\n|[\n\r\u0085\u2028\u2029]/gm,"\r\n"),u(),o.style.display="none",n.appendChild(o.parentNode.removeChild(o)),e&&void 0!==t.handler.onInputFocusOut&&t.handler.onInputFocusOut(t,s),H.isMobile?(window.clearTimeout(i),i=window.setTimeout(function(){t||c.focus()},300)):c.focus()),t.handler.showTextElement&&t.handler.showTextElement(t),t.handler.removeInputDataType&&t.handler.removeInputDataType(t),t=null)},d=function(){var e,i=r.a.Config.Properties,c=i.getPropRaw(t,"InputBehavior"),l=!1,d="text",u="",p="";c&&(l=i.getPropPart(c,"InputBehaviorPart","ClearOnActivate"),i.getPropPart(c,"InputBehaviorPart","HiddenInput")&&(d="password")),null===n&&(n=document.getElementById("ID_InputSec")),null===o&&(o=document.getElementById("ID_InputDiv")),"svg"===t.handler.DOM_TYPE?t.container.domHtmlItems.appendChild(o.parentNode.removeChild(o)):t.domNode.appendChild(o.parentNode.removeChild(o)),void 0!==t.handler.createPlaceholder&&(u=t.handler.createPlaceholder(t)),l?r.a.Config.Browser.msie()&&(p=u.trim(),t._clearPlaceholder=!0):void 0!==t.handler.getInputStartValue&&(p=t.handler.getInputStartValue(t)),function(e,n,i){var s,c,l=r.a.Config.Properties,d=r.a.Canvas.Converters,u=r.a.HmiTypes.HmiObject.getFont(t,"Font"),p=l.getProp(t,"ForeColor",d.enumConverter.Color),m=r.a.HmiTypes.HmiObject.getInnerBounds(t);if(s="position:absolute; outline:none; top:"+m.t.toString()+"px; left:"+m.l.toString()+"px; overflow:hidden; width:"+m.w+"px; height:"+m.h+"px; pointer-events:visiblePainted; display:inline;",o.setAttribute("style",s),"svg"===t.handler.DOM_TYPE){o.style.opacity=l.getProp(t,"Opacity"),t.handler.DOM_TYPE="html";var g=d.convertTo(d.enumConverter.TransformRotate,null,t);if(null!==g){o.style.setProperty("transform",g);var f=d.convertTo(d.enumConverter.TransformOriginPlaced,null,t);o.style.setProperty("transform-origin",f)}else o.style.removeProperty("transform");t.handler.DOM_TYPE="svg"}c=document.getElementById(a),"IOField"===t.props.Type?(c.type=e,c.placeholder=n,i=i.replace(/\r\n/gm,"\u2028")):c.style.resize="none",c.value=i,c.style.width=m.w+"px",c.style.height=m.h+"px",c.style.fontFamily=r.a.HmiTypes.HmiObject.safeFontFamily(u.Name),c.style.fontSize=u.Size+"px",c.style.fontWeight=u.Weight,c.style.fontStyle=u.Italic?"italic":"normal",c.style.color=p,c.style.background="transparent",r.a.HmiTypes.Utils.setPrefixedStyle(c,"userSelect","text")}(d,u,p),(e=document.getElementById(s))?(e.style.display="inline",e.focus&&e.focus(),e.click&&e.click(),l||document.getElementById(a).select(),m(e)):setTimeout(function(e){(e=e||document.getElementById(s)).style.display="inline",e.focus&&e.focus(),e.click&&e.click(),l||document.getElementById(a).select(),m(e)},0)},u=function(){var e;e=document.getElementById(s),g(e),e.style.display="none"},p=function(e){return e.stopPropagation(),!1},m=function(t){t.addEventListener("keydown",e.Interaction.Input.onKeyDown,!1),t.addEventListener("keypress",e.Interaction.Input.onKeyPress,!1),t.addEventListener("keyup",p,!1);var n=H.mapEventName("mousedown");t.addEventListener(n,p,!1)},g=function(t){t.removeEventListener("keydown",e.Interaction.Input.onKeyDown,!1),t.removeEventListener("keypress",e.Interaction.Input.onKeyPress,!1),t.removeEventListener("keyup",p,!1);var n=H.mapEventName("mousedown");t.removeEventListener(n,p,!1)};return{startInput:function(e){r.a.Config.Properties.getProp(e,"Opacity")<=0||("IOField"===(t=e).type?(a="ID_InpInput",s="ID_InpLabelInput"):(a="ID_InpTextArea",s="ID_InpLabelTextArea"),window.clearTimeout(i),i=null,c=document.activeElement,t.handler.setInputDataType&&t.handler.setInputDataType(t),t.handler.hideTextElement&&t.handler.hideTextElement(t),d())},endInput:l,isInputActive:function(){return null!==t},onKeyDown:function(e){var n=!1;return void 0!==t.handler.onInputKeyDown&&(n=t.handler.onInputKeyDown(t,e.keyCode,e.target.value,e.shiftKey)),e.ctrlKey&&83===e.keyCode&&(n=!0),n&&e.preventDefault(),e.stopPropagation(),!n},onKeyPress:function(e){var n,o=!1;if(e.charCode)if(void 0!==t.handler.onInputKeyPress&&(o=t.handler.onInputKeyPress(t,e.charCode,e.target.value)),o){e.preventDefault();var i=r.a.Config.Properties.getProp(t,"InputBehavior");if(i&&i.ClearOnInvalidInput){var s="",c="";t.handler.createPlaceholder&&(s=t.handler.createPlaceholder(t)),r.a.Config.Browser.msie()&&(c=s.trim(),t._clearPlaceholder=!0),(n=document.getElementById(a)).value=c,n.placeholder=s,n.setSelectionRange&&n.setSelectionRange(0,0)}}else t._clearPlaceholder&&(t._clearPlaceholder=!1,(n=document.getElementById(a)).value="");return e.stopPropagation(),!o},checkHandleInputEnd:function(e){null!==t&&t===e&&l(!0)},checkHandleInputEndForScreen:function(e){var n=null!==t?t.container:null;null!==t&&n===e&&l(!0)},forceInputEnd:function(e){null!==t&&l()}}},L=function(e){return x(e)},F=function(e){var t=r.a.Config.PropertyEnums,n=[],o=function(t){var n=t.currentTarget.getAttribute("data-rtoid");return e.SOMManager.getItem(n)},i=function(e,t,n,o){var i=r.a.Config.Properties,a=r.a.Canvas.Converters,s={};t.isTopLevelScreenWindow?(s.x=0,s.y=0,s.adaptScreenToWindowFactor=1):r.a.HmiTypes.HmiObject.getRelPosToTLSW(t.container,s),n.x=(e.x-s.x)/s.adaptScreenToWindowFactor,n.y=(e.y-s.y)/s.adaptScreenToWindowFactor,void 0!==o&&(o.x=n.x-i.getProp(t,"Left",a.enumConverter.None,0),o.y=n.y-i.getProp(t,"Top",a.enumConverter.None,0))},a=function(e){return e.preventDefault(),e.stopPropagation(),!1},s=function(e,n){var o=e.props.Operability;o&&!e.gfxWebLib.getCheckAuthorization()&&(o&=~t.HmiOperability.NoAuthorization);var i,a,s=void 0===o||o===t.HmiOperability.Operable;if(!s&&n&&e.props.Operability===t.HmiOperability.NoAuthorization){switch(e.props.Operability){case t.HmiOperability.DisabledProgrammatically:a="TBID_OperationDisabledProgrammatically";break;case t.HmiOperability.NoExplicitUnlock:a="TBID_OperationNoExplicitUnlock";break;default:a="TBID_OperationNotAuthorized"}r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info," Interaction checkPermission: OperationNotAuthorized"),i=r.a.TextBib.getText(a),P.showMessageOnce(i,{closeTimeout:1e4})}return s},c=function(t){if(t.item&&t.item.container){const n=t.item.groupContainer||t.item.container;n!==e.Interaction.Selection.getActiveScreen()&&e.Interaction.Selection.setActiveItem(n)}},l=function(e,t){for(;e;){if(t.includes(e))return!0;e=e.parentNode}return!1},d=function(e,t){switch(e.item.props.Type){case"Screen":case"FaceplateType":return(e.target===e.item.domHtmlItems||l(e.target,[e.item.svgWndBg]))&&t(e),!1;case"ScreenWindow":case"FaceplateContainer":case"PopupScreenWindow":return!(!e.item.domSvgNode||!l(e.target,[e.item.domSvgNode,e.item._scrollBaseVertical?e.item._scrollBaseVertical.node:null,e.item._scrollBaseHorizontal?e.item._scrollBaseHorizontal.node:null]))&&(t(e),!0);case"Button":return t(e),function(e){return!(!e.events||!e.events.includes(b.HmiEventID.Down)&&!e.events.includes(b.HmiEventID.Up))||r.a.HmiTypes.HmiObject.isExplicitUnlock(e)}(e.item);case"AlarmControl":case"TrendControl":case"FunctionTrendControl":case"TrendCompanion":case"ObjectExplorerControl":case"ProcessControl":case"SystemDiagnosisControl":case"DetailedParameterControl":case"ProcessDiagnosisGraphOverviewControl":case"ProcessDiagnosisPlcCodeViewerControl":return!0;default:return t(e),!1}},u={zoomOnPoint:{enabledEvents:{down:function(t){return d(t,e.Interaction.onPointerDown.bind(e.Interaction))},move:function(t){return e.Interaction.onPointerMove(t),!0},up:function(t){return d(t,e.Interaction.onPointerUp.bind(e.Interaction)),!0},enter:function(t){return e.Interaction.onMouseEnter(t),!0},leave:function(t){return e.Interaction.onMouseLeave(t),!0}},disabledEvents:{down:function(e){return e.preventDefault(),c(e),!1},move:function(e){return!1},up:function(e){return!1},enter:function(t){return e.Interaction.onMouseEnter(t),!0},leave:function(t){return e.Interaction.onMouseLeave(t),!0}}},legacy:{enabledEvents:{down:function(t){return e.Interaction.onPointerDown(t),!0},move:function(t){return e.Interaction.onPointerMove(t),!0},up:function(t){return e.Interaction.onPointerUp(t),!0},enter:function(t){return e.Interaction.onMouseEnter(t),!0},leave:function(t){return e.Interaction.onMouseLeave(t),!0}},disabledEvents:{down:function(e){return c(e),!0},move:function(e){return!0},up:function(e){return!0},enter:function(t){return e.Interaction.onMouseEnter(t),!0},leave:function(t){return e.Interaction.onMouseLeave(t),!0}}}},p=null,m=function(){return p=p||H.createInstance(document,{autoStart:!1,callbacks:{move:function(t){t.preventDefault(),e.Interaction.onPointerMove(t)}}})};return{Selection:W(e),Cursor:O(e),Input:L(e),Keyboard:A(e),Wheel:k(e),setCapture:function(e){e&&(0===n.length&&m().setCapture(),n.push(e))},releaseCapture:function(e){var t,o=n.pop();if(o)try{(t=o.handler)&&t.onReleaseCapture&&t.onReleaseCapture(o,0,0,e),0===n.length&&m().releaseCapture()}catch(e){r.a.Debug.traceErr(e,"PWC.Core.Interaction:releaseCapture()")}},onPointerMove:function(e){var t,o,r={},a=n.length;a>0&&(o=n[a-1])&&(t=o.handler)&&t.onPointerMove&&(i(e,o,{},r),t.onPointerMove(o,r.x,r.y))},onMouseEnter:function(t,n){null!==(n=n||o(t))&&void 0===n.control&&(n.handler&&n.handler.onHover&&n.handler.onHover(n,!0),e.Tooltip.show(n,t.x,t.y),r.a.HmiTypes.HmiObject.canActivate(n,!0)?this.Cursor.setCursor(n.domNode,!0,"pointer"):n.props.Type===r.a.HmiTypes.HmiObjectTypes.TYPE_HMI_IOFIELD&&r.a.Config.Properties.getProp(n,"Enabled")&&r.a.Config.Properties.getProp(n,"IOFieldType")?this.Cursor.setCursor(n.domNode,!0,"text"):this.Cursor.setCursor(n.domNode,!0,"default"))},onMouseLeave:function(t,n){null!==(n=n||o(t))&&void 0===n.control&&(n.handler&&n.handler.onHover&&n.handler.onHover(n,!1),e.Tooltip.hide(),this.Cursor.setCursor(n.domNode,!0,"default"))},onPointerDown:function(t){var n,r,a={},c={};null!==(n=o(t))&&(e.Tooltip.suspend(),e.Notifier.sendTelemetryPointerDownEvent(n.rtoid,t.x,t.y),s(n,!0)&&(i(t,n,a,c),(r=n.handler)&&r.onPointerDown&&32768===r.onPointerDown(n,c.x,c.y,t.target,t.button)&&(m().pointerId=t.pointerId,t.preventDefault()),this.Selection.onPointerDown(n,a.x,a.y,t.button,t.flags,t.trigger)))},onPointerUp:function(t){var n,r,a={},c={};n=o(t),this.releaseCapture(n),e.Tooltip.resume(),null!==n&&(e.Notifier.sendTelemetryPointerUpEvent(n.rtoid,t.x,t.y),t.click&&e.Notifier.sendTelemetryTappedEvent(n.rtoid,t.x,t.y),s(n,!1)&&(i(t,n,a,c),(r=n.handler)&&r.onPointerUp&&r.onPointerUp(n,c.x,c.y,t.target,t.button),this.Selection.onPointerUp(n,a.x,a.y,t.button,t.flags,t.click,t.trigger)))},addEvents:function(e,t){var n=e.useSvgNodeForEvents?e.domSvgNode:e.domNode;e.pointers=e.pointers||H.createInstance(n,{item:e});var o=u.legacy;r.a.Settings.zoomOnPoint&&(o=u.zoomOnPoint),(t=void 0===t||t)&&(e.operable||r.a.HmiTypes.HmiObject.hasActions(e)||r.a.HmiTypes.HmiObject.isExplicitUnlock(e))?e.pointers.set({callbacks:o.enabledEvents}):e.pointers.set({callbacks:o.disabledEvents})},removeEvents:function(e){e.pointers&&(e.pointers.stop(),e.pointers=null)},preventDefaultEvtBehavior:function(e){return!!r.a.Settings.disablePreventDefaultEvents||a(e)},evtX:function(e){return Math.round(void 0!==e.pageX?e.pageX:e.clientX)},evtY:function(e){return Math.round(void 0!==e.pageY?e.pageY:e.clientY)},emptyEventHandler:a,checkPermission:s,getRelEventPosInScreenAndItem:i}},R={create:function(e){return F(e)}},_=function(){function e(e){this.core=e}return e.prototype.openScreen=function(e){var t=!1;e.parent=e.parent||this.core.toplevelWindow.rtoid;var n=this.core.SOMManager.getScreenWindow(e.parent);if(null!==n){n.screen&&void 0!==n.screen.initialized&&(t=n.screen.initialized);var o=e;o.gfxWebLib=n.gfxWebLib,o.container=n,o.initialized=t;var i=n.pendingScreen;i&&(r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Warning,"Dispatcher:_openScreen() Warning: pending screen cleanup "),l.onCleanUp(i)),n.pendingScreen=n.screen,n.screen=o,l.onDocumentChanged(this.core,o)}},e.prototype.activateScreen=function(e){e.parent=e.parent||this.core.toplevelWindow.rtoid;var t=this.core.SOMManager.getScreenWindow(e.parent);if(null!==t){var n=t.pendingScreen;n&&(t.pendingScreen=null,l.onCleanUp(n)),t.screen?l.onDocumentActivated(t.screen):r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Warning,"JSONProcessor:activateScreen() Warning: no screen loaded")}},e.prototype.closeScreen=function(e){e.parent=e.parent||this.core.toplevelWindow.rtoid;var t=this.core.SOMManager.getScreenWindow(e.parent);t&&t.screen&&"FaceplateContainer"===t.props.Type&&(l.onCleanUp(t.screen),t.screen=null)},e.prototype.updateProperties=function(e){for(var t=e.length,n=0;n<t;n+=1){var o=e[n];if(o.parent){var i=this.core.SOMManager.findScreenFromSWID(o.parent);if(null===i||i.isCleanedUp||i.rtoid!==o.rtoid)r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Warning,"Dispatcher:_updateProperties() Warning: Screen not found. screen.rtoid: "+o.rtoid);else if(i.activated)l.onObjectChanged(i,o);else if(i.handler)l.onObjectInitialized(i,o);else{var a=this.core.SOMManager.getScreenWindow(i.parent);a&&a.control&&a.control.handler.onObjectInitialized(a,o)}}else if(o.items)for(var s=0;s<o.items.length;s+=1){var c=o.items[s],d=this.core.SOMManager.getScreenWindow(c.rtoid);d&&d.handler&&d.handler.onChanged(d,c.props,c.part)}}},e.prototype.updateDLData=function(e){var t=this.core.SOMManager.findScreenFromSWID(e.parent);if(t&&!t.isCleanedUp){var n=l.getItem(t,e.rtoid);if(n&&n.handler.onDLSendData)try{n.handler.onDLSendData(n,e.DL_id,e.DL_data),n.control&&n.control.initialized&&(n.dirtyFlags|=2,t.dirtyFlags|=4)}catch(e){r.a.Debug.traceErr(e,"JSONProcessor:onDomainLogicChanged()",t)}else n?r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Warning,"JSONProcessor:onDomainLogicChanged Warning: Item has no handler for onDLSendDatanot. Item.type: "+n.props.Type):r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Warning,"JSONProcessor:onDomainLogicChanged Warning: Item not found. data.rtoid: "+e.rtoid)}},e.prototype.invokeMethodAsync=function(e){var t=this.core.SOMManager.findScreenFromSWID(e.parent);if(t&&!t.isCleanedUp){var n=l.getItem(t,e.rtoid);if(n&&n.handler.invokeMethodAsync)try{n.handler.invokeMethodAsync(n,e.method)}catch(e){r.a.Debug.traceErr(e,"JSONProcessor:invokeMethodAsync()",t)}else n?r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Warning,"JSONProcessor:invokeMethodAsync Warning: Item has no handler for invokeMethodAsync. Item.type: "+n.props.Type):r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Warning,"JSONProcessor:invokeMethodAsync Warning: Item not found. data.rtoid: "+e.rtoid)}},e.prototype.projectPropertyChanged=function(e){var t;if(void 0!==e)if(void 0!==e.SystemState)r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,"Connection:OnProjectPropertyChanged: SystemState = "+e.SystemState),e.SystemState<b.GfxSystemState.GFX_SYSTEM_STATE_ACTIVE&&(t=r.a.TextBib.getText("TBID_HR_0x8007139F",null,"Runtime not active."),P.showMessage(t));else if(void 0!==e.CurrentLanguage)r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,"Connection:OnProjectPropertyChanged: CurrentLanguage = "+e.CurrentLanguage),"number"==typeof e.CurrentLanguage?this.core.SOMManager.onCurrentLanguage(e.CurrentLanguage)&&!this.core.options.isComponent&&this.core.options.UmcService.changeLanguage(r.a.TextBib.getCultureByLocaleId(e.CurrentLanguage)):"string"==typeof e.CurrentLanguage&&this.core.options.isComponent&&this.core.Notifier.sendProjectProperty("0",b.HmiProjectPropertyID.CurrentLanguage,r.a.TextBib.getLocaleIdByCulture(e.CurrentLanguage));else if(void 0!==e.Logout)r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,"Connection:OnProjectPropertyChanged: Logout = "+e.Logout),e.Logout?this.core.options.UmcService.logout():window.location.reload();else if(void 0!==e.AdaptBaseScreenToWindow){if(r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,"Connection:OnProjectPropertyChanged: AdaptBaseScreenToWindow  = "+e.AdaptBaseScreenToWindow),this.core.toplevelWindow.control){var n="0"!==e.AdaptBaseScreenToWindow.toString()?r.a.Config.PropertyEnums.HmiScreenWindowAdaption.ScreenToWindow:0;this.core.toplevelWindow.control.handler.onChanged(this.core.toplevelWindow,{Adaption:n})}}else r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,"Connection:projectPropertyChanged: unknown property")},e.prototype.modelMessage=function(e){var t;void 0!==e&&(void 0!==e.OperationNotAuthorized?(r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,"Connection:OnModelMessage: OperationNotAuthorized = "+e.OperationNotAuthorized),t=r.a.TextBib.getText("TBID_OperationNotAuthorized"),P.showMessageOnce(t,{closeTimeout:1e4})):void 0!==e.OperationWriteTagForbidden?(r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,"Connection:OnModelMessage: OperationWriteTagForbidden = "+e.OperationWriteTagForbidden),t=r.a.TextBib.getText("TBID_OperationWriteTagForbidden"),P.showMessage(t,{closeTimeout:1e4})):void 0!==e.NotifyNoLicense?(r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,"Connection:OnModelMessage: NotifyNoLicense = "+e.NotifyNoLicense),P.showMessageOnce(e.NotifyNoLicense,{width:400,icon:"fa fa-ban fa-3x"})):r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Info,"Connection:OnModelMessage: unknown message"))},e}(),U=function(e){var t=!1,n=[],o=function(e){for(var t=n.length,o=0;o<t;o+=1){var r=n[o];if(e(r))return r}return null},i=function(e){return o(function(t){return t.rtoid===e})},a=function(e){var t=o(function(t){if(t.screen)return t.rtoid===e});return null!==t?t.screen:null},s=function(e){var t,n=function(e){if(null!==e){var t=e.split("_");if(t.length>0)return t[0]}return"00"}(e);return"00"!==n&&(n+="_00",null!==(t=o(function(e){if(e.screen)return e.screen.rtoid===n})))?t.screen:null},c=[],d=null,u=function(t){if(r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Perf,t),r.a.Debug.getTraceMode()===r.a.Debug.enumTraceMode.Perf){var n=r.a.Formatter.format(Date.now(),"{T,@HH:mm:ss:SSS}",{timeZone:"localtime"});e.Notifier.sendTraceEvent("0",n+" : "+t)}},p=function(e){r.a.Debug.getTraceMode()===r.a.Debug.enumTraceMode.Perf&&c.push(e)},m=function(){for(var t=c.shift();t;)u(t),t=c.shift();var o=function(){for(var t,o=n.length,i=0,a=0;a<o;a+=1){var s=n[a].screen;s&&s.dirtyFlags&&(r.a.Debug.traceSwitch(r.a.Debug.enumTraceMode.Perf)&&!s.lateResponseDisabled&&(t=r.a.Debug.traceTimerStart(),u("LateResponseStarted")),i+=l.onRedraw(s),r.a.Debug.traceSwitch(r.a.Debug.enumTraceMode.Perf)&&!s.lateResponseDisabled&&(p("FinishedDrawingLateResponse"),u("LateResponseFinished"),r.a.Debug.traceTimerLog("LateResponse",t)),s.dirtyFlags=0,s.lateResponseDisabled=!0)}if(i){var c=e.Interaction.Selection.getActiveItem();!c||r.a.HmiTypes.Utils.isScreen(c)||r.a.HmiTypes.HmiObject.canActivate(c)||e.Interaction.Selection.initializeActiveItem()}return i}();return d&&(d(),d=null),o},g={div:null,then:Date.now(),interval:1e3/30,redrawCalls:0,trace:!1,show:function(e){var t=1e3/e;null===this.div?this.div=r.a.Canvas.Dom.createDomElement("div",{id:"ID_FPS_DIV",style:"position:absolute; pointer-events:none; user-select:none; left:0px; top:0px; font-size:200%;",appendTo:document.body}):this.div.innerHTML=t.toFixed(1)}},f=function(){var e=Date.now(),t=e-g.then;t>g.interval?(g.then=e-t%g.interval,g.trace&&g.redrawCalls&&g.show(t),g.redrawCalls=m()):t<0&&(g.then=e),window.requestAnimationFrame(f)};return window.requestAnimationFrame(f),{JSONProcessor:new _(e),reset:function(){if(t=!1,e.popupScreen.items.length){var o=e.popupScreen.items.slice(0);l.onObjectRemoved(e.popupScreen,o)}n.splice(1)},onCurrentLanguage:function(t){var o=e.gfxWebLib,i=!1;if(r.a.Debug.consolLog(r.a.Debug.enumTraceMode.TestCurr,"onCurrentLanguage. locale: "+t.toString()),o&&o.textbib.getLocale()!==t&&(o.textbib.setLocale(t),i=!0),i)for(var a=0;a<n.length;a+=1){var s=n[a].screen;s&&l.onCurrentLanguage(s,t)}return i},onScreenLoaded:function(e){var t,n=r.a.Config.Properties.getProp(e,"Name");r.a.Debug.traceSwitch(r.a.Debug.enumTraceMode.Perf)&&(t=r.a.Debug.traceTimerStart(),r.a.Canvas.Svg.resetSvgElementCount(),u("OpenScreenStarted: "+n)),this.JSONProcessor.openScreen(e),r.a.Debug.traceSwitch(r.a.Debug.enumTraceMode.Perf)&&(u("OpenScreenFinished: "+n),r.a.Debug.consolLog(r.a.Debug.enumTraceMode.Perf,"Number of svg elements: "+r.a.Canvas.Svg.getSvgElementCount().toString()),r.a.Debug.traceTimerLog("OpenScreen",t))},onScreenActivated:function(e){var t;r.a.Debug.traceSwitch(r.a.Debug.enumTraceMode.Perf)&&(t=r.a.Debug.traceTimerStart()),this.JSONProcessor.activateScreen(e),r.a.Debug.traceSwitch(r.a.Debug.enumTraceMode.Perf)&&(p("FinishedStaticDrawing"),r.a.Debug.traceTimerLog("ActivateScreen",t))},onScreenUnloaded:function(e){this.JSONProcessor.closeScreen(e)},onPropertiesChanged:function(e){this.JSONProcessor.updateProperties(e)},onDynamicChanged:function(e){if("FlashingDynamic"===e.type){var t=s(e.rtoid);t&&l.onFlashingDynamicChanged(t,e)}},onObjectAdded:function(t){if(t.parent){var n=i(t.parent);n&&n.screen&&t.items&&l.onObjectAdded(n.screen,t.items)}else l.onObjectAdded(e.popupScreen,t.items)},onObjectRemoved:function(t){if(t.parent){var n=i(t.parent);n&&n.screen&&t.items&&l.onObjectRemoved(n.screen,t.items)}else l.onObjectRemoved(e.popupScreen,t.items)},onObjectMoved:function(e){var t=i(e.parent);t&&t.screen&&e.items&&l.onObjectMoved(t.screen,e.items)},onDomainLogicChanged:function(e){var t,n,o=!1;if(r.a.Debug.traceSwitch(r.a.Debug.enumTraceMode.Perf)&&(o=!!(n=a(Array.isArray(e)?e[0].parent:e.parent))&&!n.domaiLogicResponseDisabled)&&(t=r.a.Debug.traceTimerStart(),u("DomainLogicChangedStarted")),Array.isArray(e))for(var i=0;i<e.length;)this.JSONProcessor.updateDLData(e[i]),i++;else this.JSONProcessor.updateDLData(e);r.a.Debug.traceSwitch(r.a.Debug.enumTraceMode.Perf)&&o&&(p("FinishedDrawingAsyncResponse"),u("DomainLogicChangedFinished"),r.a.Debug.traceTimerLog("DomainLogicChanged",t)),n&&(n.domaiLogicResponseDisabled=!0)},onInvokeMethodAsync:function(e){var t;r.a.Debug.traceSwitch(r.a.Debug.enumTraceMode.PerfLow)&&(t=r.a.Debug.traceTimerStart(),r.a.Debug.consolLog(r.a.Debug.enumTraceMode.PerfLow,"Dispatcher:onInvokeMethodAsync() start."));try{this.JSONProcessor.invokeMethodAsync(e)}catch(e){r.a.Debug.traceErr(e,"Dispatcher:onInvokeMethodAsync()")}r.a.Debug.traceSwitch(r.a.Debug.enumTraceMode.PerfLow)&&r.a.Debug.traceTimerLog("Dispatcher:onInvokeMethodAsync() end.",t)},onProjectPropertyChanged:function(e){this.JSONProcessor.projectPropertyChanged(e)},onModelMessage:function(e){this.JSONProcessor.modelMessage(e)},onStyleChanged:function(o){var r=o.name;r&&(e.Tooltip.onCleanUp(),e.gfxWebLib.setStyle(r,o.systemparts),t&&function(e){d=e}(function(){e.toplevelWindow.handler.onCurrentStyle(e.toplevelWindow,r);for(var t=0;t<n.length;t+=1){var o=n[t].screen;o&&l.updateStyle(o,r)}}),t=!0)},addScreenWindow:function(e){n.push(e)},removeScreenWindow:function(e){var t=n.indexOf(e);t>-1&&n.splice(t,1)},findScreenFromSWID:a,getScreenWindow:i,getItem:function(e){var t=s(e);return null!==t?t.rtoid===e?t:l.getItem(t,e):i(e)},getScreenWindows:function(){return n},updateFlashing:function(e,t){for(var o=n.length,r=!0,i=0;i<o;i+=1){var a=n[i].screen;a&&(a.flashingCount||a.flashingCountCustom)&&(l.onFlashing(a,e,t),r=!1)}return r},notifyTraceState:u,registerTraceState:p}},j={create:function(e){return U(e)}},z=function(e,t){return e+"/"+t},Y=function(e){var t=[],n=[],o=[],r=function(e,t,n){var o=e[t];o&&window.setTimeout(function(){o.apply(e,n)},0)},i=function(n,o){var i=t.length;if(i){var a=function(e,t,n){var o=e.getItem(n[0]);switch(t){case"sendToolBarCommand":return{method:"onEvent",args:[o,"ToolBarCommand",{CommandId:n[1]}]};case"sendEvent":return n[1]===b.HmiEventID.Activated?n[1]="Activated":n[1]===b.HmiEventID.Deactivated?n[1]="Deactivated":n[1]===b.HmiEventID.OnScreenWindowClose&&(n[1]="OnScreenWindowClose"),{method:"onEvent",args:[o,n[1],{Value:n[2]}]};case"sendEventByName":return{method:"onEvent",args:[o,n[1],{Value:n[2]}]};case"sendKeyboardPressedEvent":return{method:"onEvent",args:[o,"KeyDown",{KeyCode:n[1],Modifiers:n[3]}]};case"sendKeyboardReleasedEvent":return{method:"onEvent",args:[o,"KeyUp",{KeyCode:n[1],Modifiers:n[3]}]};case"sendTappedEvent":return{method:"onEvent",args:[o,n[3]>1?"ContextTapped":"Tapped",{X:n[1],Y:n[2],Modifiers:n[4],Trigger:n[5]}]};case"sendGestureEvent":return{method:"onEvent",args:[o,"GestureDetected",{Gesture:n[1]}]};case"sendPointerDownEvent":return{method:"onEvent",args:[o,"Down",{X:n[1],Y:n[2],Modifiers:n[4],Trigger:n[5]}]};case"sendPointerUpEvent":return{method:"onEvent",args:[o,"Up",{X:n[1],Y:n[2],Modifiers:n[4],Trigger:n[5]}]};case"sendPropertyByName":return{method:"onPropertiesChanged",args:[[{item:o,path:n[1],value:n[2],notify:n[3]}]]};case"sendPropertiesByName":var r=[],i=n[1];for(var a in i)i.hasOwnProperty(a)&&r.push({item:o,path:a,value:i[a],notify:n[2]});return{method:"onPropertiesChanged",args:[r]};case"sendPartPropertyByName":return{method:"onPropertiesChanged",args:[[{item:o,path:z(n[1],n[2]),value:n[3],notify:n[4]}]]};case"sendPartPropertiesByName":var s=[],c=n[2];for(var l in c)c.hasOwnProperty(l)&&s.push({item:o,path:z(n[1],l),value:c[l],notify:n[3]});return{method:"onPropertiesChanged",args:[s]};case"onScreenLoaded":case"onScreenActivated":return{method:t,args:[o,n[1]]};case"onScreenUnloaded":return{method:t,args:[n[1]]};case"sendAsyncMethodResult":return{method:"onInvokeMethodAsync",args:[o,n[1],n[2]]};case"sendTraceEvent":return{method:"onTraceMessage",args:[n[1]]};case"sendProjectProperty":return{method:"onProjectPropertiesChanged",args:[n[1],n[2]]};default:return null}}(e.SOMManager,n,o);if(a)for(var s=0;s<i;s++){var c=t[s];r(c,a.method,a.args)}}},a=function(e,t){var o=n.length;if(o)for(var r=0;r<o;r++){var i=n[r],a=i[e];a&&a.apply(i,t)}},s=function(e,t){var n=o.length;if(n)for(var r=0;r<n;r++){var i=o[r],a=i[e];a&&a.apply(i,t)}};return{registerEventNotify:function(e){if(-1===t.indexOf(e))return t.push(e),!0},registerRHProxyNotify:function(e){if(-1===n.indexOf(e))return n.push(e),!0},registerTelemetryNotify:function(e){if(-1===o.indexOf(e))return o.push(e),!0},sendTappedEvent:function(){a("sendTappedEvent",arguments),i("sendTappedEvent",arguments)},sendGestureEvent:function(){a("sendGestureEvent",arguments),i("sendGestureEvent",arguments)},sendPointerDownEvent:function(){a("sendPointerDownEvent",arguments),i("sendPointerDownEvent",arguments)},sendPointerUpEvent:function(){a("sendPointerUpEvent",arguments),i("sendPointerUpEvent",arguments)},sendKeyboardPressedEvent:function(){a("sendKeyboardPressedEvent",arguments),i("sendKeyboardPressedEvent",arguments)},sendKeyboardReleasedEvent:function(){a("sendKeyboardReleasedEvent",arguments),i("sendKeyboardReleasedEvent",arguments)},sendPropertyByName:function(){a("sendPropertyByName",arguments),i("sendPropertyByName",arguments)},sendPropertiesByName:function(){a("sendPropertiesByName",arguments)},sendPartPropertyByName:function(){a("sendPartPropertyByName",arguments),i("sendPartPropertyByName",arguments)},sendPartPropertiesByName:function(){a("sendPartPropertiesByName",arguments)},setPropertyValue:function(){a("setPropertyValue",arguments)},sendDomainLogicEvent:function(){a("sendDomainLogicEvent",arguments)},sendAsyncMethodResult:function(){a("sendAsyncMethodResult",arguments),i("sendAsyncMethodResult",arguments)},sendToolBarCommand:function(){a("sendToolBarCommand",arguments)},sendEvent:function(){a("sendEvent",arguments),i("sendEvent",arguments)},sendEventByName:function(){a("sendEventByName",arguments),i("sendEventByName",arguments)},sendScreenItemCreate:function(){a("sendScreenItemCreate",arguments)},sendScreenItemDelete:function(){a("sendScreenItemDelete",arguments)},sendPartCreate:function(){a("sendPartCreate",arguments)},sendPartDelete:function(){a("sendPartDelete",arguments)},sendPartMove:function(){a("sendPartMove",arguments)},sendTraceEvent:function(){a("sendTraceEvent",arguments)},sendProjectProperty:function(){a("sendProjectProperty",arguments)},onScreenLoaded:function(){a("onScreenLoaded",arguments),i("onScreenLoaded",arguments)},onScreenActivated:function(){i("onScreenActivated",arguments)},onScreenUnloaded:function(){i("onScreenUnloaded",arguments)},onEvent:function(){r("onEvent",arguments)},onPropertiesChanged:function(){r("onPropertiesChanged",arguments)},sendTelemetryTappedEvent:function(){s("sendTappedEvent",arguments)},sendTelemetryPointerDownEvent:function(){s("sendPointerDownEvent",arguments)},sendTelemetryPointerUpEvent:function(){s("sendPointerUpEvent",arguments)}}},V={create:function(e){return Y(e)}},G=function(){function e(e){this.core=e}return e.splitPath=function(e){var t=e.replace(/\//gi,":").split(":");if(t.length>1){var n=t.pop();return{part:t.join(":"),name:n}}return{name:t[0]}},e.getValue=function(e,t,n){var o=r.a.Config.Properties;if(!n)return o.getProp(e,t);var i=o.getPart(e,n);return i?o.getPropPart(i,i.Type,t):null},e.buildScreenItemPath=function(e){for(var t="";e&&e.container;)switch(e.props.Type){case"TopLevelScreenWindow":t="~"+t,e=null;break;case"ScreenWindow":case"PopupScreenWindow":case"FaceplateContainer":t="/"+e.props.Name+t,e=e.container;break;case"Screen":case"FaceplateType":e=e.container;break;default:t="/"+e.props.Name,e=e.container}return t},e.getRootScreenWindow=function(e){for(;e&&e.container;)switch(e.props.Type){case"TopLevelScreenWindow":case"PopupScreenWindow":return e;default:e=e.container}},e.updateFlashingProperty=function(e,t,n,o){let r=e.container;if("Screen"!==e.props.Type&&"FaceplateType"!==e.props.Type||(r=e),r.flashing){const i=r.flashing.find(t=>t.item===e&&t.part===n);if(i){const e=i.props[t];e&&(e.CurrentValue=o)}}},e.prototype.loadScreen=function(e,t){e=e||this.core.toplevelWindow,t.parent=e.rtoid,this.core.SOMManager.onScreenLoaded(t),this.core.SOMManager.onScreenActivated(t)},e.prototype.setProperty=function(t,n,o){if(t&&t.handler){var r=e.splitPath(n),i=Object.defineProperty({},r.name,{value:o,enumerable:!0,writable:!0});e.updateFlashingProperty(t,r.name,r.part,o),t.handler.onChanged(t,i,r.part)}},e.prototype.getProperty=function(t,n){if(t&&t.handler){var o=e.splitPath(n);return e.getValue(t,o.name,o.part)}return null},e.prototype.resolvePath=function(t,n){var o=e.splitPath(n);if(o.part){var i=r.a.Config.Properties.getPart(t,o.part);return{part:o.part,type:r.a.HmiTypes.ControlBar.getTypeNameFromId(i.Type),name:o.name}}return{name:o.name,type:t.props.Type}},e.prototype.getLanguageID=function(){return r.a.TextBib.getLocale()},e.prototype.setLanguageID=function(e){this.core.SOMManager.onCurrentLanguage(e)},e.prototype.getLanguage=function(){return r.a.TextBib.getCultureByLocaleId(r.a.TextBib.getLocale())},e.prototype.setLanguage=function(e){var t=r.a.TextBib.getLocaleIdByCulture(e);this.core.SOMManager.onCurrentLanguage(t)},e.prototype.getStyle=function(){return this.core.gfxWebLib.getStyle(!0)},e.prototype.setStyle=function(e,t){this.core.SOMManager.onStyleChanged({name:e,systemparts:t})},e.prototype.getWindows=function(){return this.core.SOMManager.getScreenWindows()},e.prototype.getActiveWindow=function(){return this.core.Interaction.Selection.getActiveWindow()||this.core.toplevelWindow},e.prototype.getWindowById=function(e){return this.core.SOMManager.getScreenWindow(e)},e.prototype.getRootScreenWindowByName=function(e){var t=this.core.SOMManager.getScreenWindows(),n=t.filter(t=>"TopLevelScreenWindow"===t.props.Type&&t.props.Name===e)[0];if(n)return n;var o=t.filter(t=>"PopupScreenWindow"===t.props.Type&&t.props.Name===e)[0];return o||void 0},e.prototype.getRootScreenWindow=function(t){return t?e.getRootScreenWindow(t):this.core.toplevelWindow},e.prototype.findItem=function(e,t){var n;if(t.startsWith("~")){t="."+t.substring(1);var o=this.getRootScreenWindow(e);return this.findItem(o.screen,t)}if(t.startsWith("./")){if(e)return this.findItem(e,t.substring(2))}else if("."===t){if(e)return n=e.container}else if(t.startsWith("/")){var i=t.split("/"),a=i[1];i.splice(0,2);var s=i.join("/")||".",c=this.getRootScreenWindowByName(a);if(c)return this.findItem(c.screen,s)}else if(t.startsWith("..")){if(e&&(n=e.container)&&"PopupScreenWindow"!==n.props.Type&&"TopLevelScreenWindow"!==n.props.Type){var l=n.container;if(l)return this.findItem(l,"."+t.substring(2))}}else{var d,u=t.split("/"),p=u.shift(),m=u.join("/"),g=p.split("."),f=g.shift(),h=g.join(".");if(e&&(d="Screen"===f?e:e.items.filter(e=>e.props.Name===f)[0]),d){if(!m)return h?r.a.Config.Properties.getPart(d,h):d;if(d.props.Type.includes("ScreenWindow")&&d.screen)return this.findItem(d.screen,m)}}return null},e.prototype.findItemInRootScreenWindow=function(e,t){if(t.startsWith("/")){var n=t.split("/"),o=n[1];n.splice(0,2);var r=n.join("/")||".";if(e=this.getRootScreenWindowByName(o))return this.findItemInRootScreenWindow(e,r)}else{if("~"===t||"."===t)return e;if(e){(t.startsWith("~/")||t.startsWith("./"))&&(t=t.substring(2));var i=e.screen;if(i)return this.findItem(i,t)}}},e.prototype.contextFindItem=function(t,n){if(t){const o=e.getRootScreenWindow(t);return this.findItemInRootScreenWindow(o,n)}},e.prototype.addItem=function(e,t){if(e){var n=e.container;this.core.SOMManager.onObjectAdded({parent:n.rtoid,items:[t]})}else this.core.SOMManager.onObjectAdded({items:[t]})},e.prototype.removeItem=function(e,t){if(e){var n=e.container;this.core.SOMManager.onObjectRemoved({parent:n.rtoid,items:[t]})}else this.core.SOMManager.onObjectRemoved({items:[t]})},e.prototype.getItemPath=function(t){var n="";return t&&(t.screenItemPath?n=t.screenItemPath:(n=e.buildScreenItemPath(t),t.screenItemPath=n)),n},e}(),K=function(e){var t,n=!1,o=!1,i=null,a=null,s=function(){if(a){var e=a.node;if(o)return;e.style.visibility="hidden"}},c=function(e,n,o){var i,a,s,c,l,d,u,p,m=o.node,g=0,f=0,h=document.documentElement.clientWidth+window.scrollX,v=document.documentElement.clientHeight+window.scrollY;m.style.visibility="visible",o.templateInstance&&(i=o.templateInstance.RootNode,g=o.props.Width,f=o.props.Height,l=n+11,a=(c=e+7)+(a=c+g>=h?-g:7)>0?a:7,s=l+(s=l+f>=v?-f:11)>0?s:11,(t.split(".")[0]>=17||""===t)&&(p={},d=r.a.Config.PropertyEnums.HmiHorizontalAlignment,u=r.a.Config.PropertyEnums.HmiVerticalAlignment,p.HorizontalAlignment=7!==a?d.Right:d.Left,p.VerticalAlignment=11!==s?u.Bottom:u.Top,r.a.HmiTypes.Advanced.Template.updateSubTemplate(o,p),p=null),i.setAttribute("x",e+a),i.setAttribute("y",n+s))};return{show:function(l,d,u,p){var m,g=r.a.Config.Properties,f=r.a.Canvas.Converters;if((!n||void 0!==p)&&(p&&(o=!0,null!==i&&clearTimeout(i),i=setTimeout(function(){o=!1,i=null,s()},2e3)),m=p||g.getProp(l,"ToolTipText",f.enumConverter.None,""),r.a.Settings.showDeveloperTooltip&&(""!==m&&(m+="   "),m+=">>>item: ",m+=g.getPropRaw(l,"Name")||"",m+=" "+l.rtoid),""!==m)){a=a||function(n,o,i){var a=document.documentElement.scrollWidth,s=document.documentElement.scrollHeight,l=r.a.Config.PropertyEnums;t=e.gfxWebLib.getProjectVersion();var d={gfxWebLib:e.gfxWebLib,handler:{},props:r.a.Config.SystemParts.getSystemPartDefault("TooltipSystemPart"),cbOnTemplateLoaded:function(e){var t,n,l;n=r.a.Canvas.Svg.createSvgElement("svg",{width:a,height:s,appendTo:e.node}),t=r.a.Canvas.Svg.createSvgElement("clipPath",{id:"tooltipClipPath",appendTo:n}),r.a.Canvas.Svg.createSvgElement("rect",{width:a,height:s,appendTo:t}),(l=e.node.removeChild(e.templateInstance.RootNode)).setAttribute("clip-path","url(#tooltipClipPath)"),n.appendChild(l),c(o,i,e)},cbOnChanged:function(){}};return d.props.Type="TooltipSystemPart",d.props.Width=1e3,d.props.Height=100,(t.split(".")[0]>=17||""===t)&&(d.props.HorizontalAlignment=l.HmiHorizontalAlignment.Left,d.props.VerticalAlignment=l.HmiVerticalAlignment.Top),d.node=r.a.Canvas.Dom.createDomElement("div",{id:"ID_Tooltip",style:"left:0px;top:0px;pointer-events:none; position:absolute; visibility:hidden; userSelect:none; z-index:65535; width:"+a+"px;height:"+s+"px;",appendTo:n}),r.a.HmiTypes.Advanced.Template.loadSubTemplate(d),d}(e.domNode,d,u);var h=f.converterBlanks2Nbsps(m);if(t&&t.split(".")[0]<17){var v=r.a.Canvas.Svg.getTextBBox(a.props.Font,h);r.a.HmiTypes.Advanced.Template.updateSubTemplate(a,{Text:h,Width:v.width+19,Height:v.height+40}),a.templateInstance&&(a.templateInstance.RootNode.setAttribute("width",v.width+24),a.templateInstance.RootNode.setAttribute("height",v.height+44))}else r.a.HmiTypes.Advanced.Template.updateSubTemplate(a,{Text:h});c(d,u,a)}},hide:s,suspend:function(){n=!0,s()},resume:function(){n=!1},onCleanUp:function(){a&&(a.templateInstance&&(a.templateInstance.remove(!0),a.templateInstance=null),a=null)}}},X={create:function(e){return K(e)}},Q=function(){var e,t=0,n=-1,o=!1,r=[2e3,1e3,500,250,125],i=[!1,!1,!1,!1,!1],a=function(e,t){for(var n=0;n<e.length;n++)if(e[n].freq===t)return{value:e[n].value};return!1},s=function(a){var s=-1,l=-1,d=null;for(d in e.prototype.groups)e.prototype.groups[d].length>0&&(l=parseInt(d.substr(1)))>s&&(s=l);s!==n&&(-1===n||s<0||a&&o?(o=!1,n=s,e.prototype.timer&&(clearInterval(e.prototype.timer),e.prototype.timer=null),n>=0?e.prototype.timer=setInterval(c,r[n]):(i=[!1,!1,!1,!1,!1],t=0)):o=!0)},c=function(r){var c={},l=e.prototype.groups,d={},u=-1,p=0,m=null,g=null,f=null,h=null,v=null;if(r)r=r.data;else for((t+=Math.pow(2,4-n))>=16&&(t=0,o&&s(!0)),r=[],p=0;p<e.prototype.freqList.length;p++)t%e.prototype.freqList[p]==0&&(r.push({freq:4-p,value:i[p]}),i[p]=!i[p]);for(m in l)if(l.hasOwnProperty(m)&&(g=l[m])instanceof Array&&(u=parseInt(m.substr(1)),v=a(r,u)))for(p in g)g.hasOwnProperty(p)&&(f=g[p].who)instanceof e&&(void 0!==c[h=f._internal.ownerName]&&c[h]instanceof Array&&void 0!==d[h]||(c[h]=[],d[h]=f),c[h].push({name:g[p].group,freq:u,value:v.value}));for(h in d)d.hasOwnProperty(h)&&d[h].onCycle.fire(c[h])};return(e=function(t){var n=this,o=e.prototype.groups;"string"!=typeof t&&(t="CycleService"),this.beginRegister=function(e,t){var r=null,i=!0,a=null,c=!1;if(("boolean"!=typeof arguments[2]||!arguments[2])&&("string"!=typeof e||"number"!=typeof t||0===e.length||t<0||t>4))return!1;for(a in void 0!==o["_"+t]&&o["_"+t]instanceof Array||(o["_"+t]=[],c=!0),r=o["_"+t])if(r[a].group===e&&r[a].who===n){i=!1;break}return!!i&&(r.push({who:n,group:e}),c&&s(),!0)},this.beginUnregister=function(e,t){var r=0;if(("boolean"!=typeof arguments[2]||!arguments[2])&&("string"!=typeof e||"number"!=typeof t||0===e.length||t<0||t>4))return!1;if(void 0!==o["_"+t]&&o["_"+t]instanceof Array)for(r=0;r<o["_"+t].length;r++)if((null===e||o["_"+t][r].group===e)&&o["_"+t][r].who===n)return o["_"+t].splice(r,1),0===o["_"+t].length&&(delete o["_"+t],s()),!0;return!1},this.onCycle=function(){var e=[];return{subscribe:function(t){e.push(t)},unsubscribe:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},fire:function(t){var n,o=e.slice(),r=function(e){o[e].call(null,{type:"onCycle",data:t})};for(n=0;n<o.length;n++)r(n)}}}(),this._internal={ownerName:t}}).prototype.groups={},e.prototype.freqList=[1,2,4,8,16],e.prototype.timer=null,{local:new e,service:e}}(),q={create:function(e){return function(e){var t=Object.freeze({None:0,itemSpecific:536870912}),n=[!1,!1,!1],o=0,i=!1,a=e.options.LocalCycle||Q.local,s=function(t){var s;if(t=Math.min(r.a.Config.PropertyEnums.HmiFlashingRate.None,t),i){if(t>o){for(s=o+1;s<=t;s++)a.beginRegister("WebRH",s);o=t}}else{if(i=!0,t===r.a.Config.PropertyEnums.HmiFlashingRate.None)return;for(o=Math.max(r.a.Config.PropertyEnums.HmiFlashingRate.Slow,t),a.onCycle.subscribe(function(t){var i=0,s=t.data,c=s.length,l=r.a.Config.PropertyEnums.HmiFlashingRate.Fast;for(i=0;i<c;i++)n[s[i].freq]=s[i].value,l=Math.min(l,s[i].freq);if(e.SOMManager.updateFlashing(l,n)){for(i=0;i<=o;i++)a.beginUnregister("WebRH",i);o=-1}}),s=0;s<=o;s++)a.beginRegister("WebRH",s)}};return{enumFlashingRate:r.a.Config.PropertyEnums.HmiFlashingRate,startFlashing:s,getFlashingRates:function(){return r.a.Config.PropertyEnums.HmiFlashingRate},setRemoveItemSpecificFlashing:function(e,n,o){e.container&&(n?(e.flashingProps=t.itemSpecific,e.flashingRate=void 0!==o?o:1,e.container.flashingCountCustom+=1):(e.flashingProps=t.None,e.container.flashingCountCustom-=1),e.flashingProps!==t.None&&s(e.flashingRate))},setFlashingProperties:function(e,t){var o,i,a,s=e.props,c=e.item,l=0,d={};if(c){for(i in s)s.hasOwnProperty(i)&&(o=s[i]).Active&&(a=Math.min(r.a.Config.PropertyEnums.HmiFlashingRate.Fast,o.Rate))>=t&&(l+=1,Object.defineProperty(d,i,{value:n[a]?o.Value:o.Alternate,configurable:!0,enumerable:!0,writable:!0}));l&&c.handler.onChanged(c,d,e.part)}}}}(e)}},Z=function(){function e(t,n){this.domNode=t,this.options=n||{},this.options.appDir=this.options.appDir||"",r.a.jQL.extend(r.a.Settings,this.options.clientConfig),this.config={appDir:this.options.appDir,appType:this.options.appType||r.a.AppType.SCADA,imageUrl:this.options.imageUrl||this.options.appDir+"resources/",templateUrl:this.options.templateUrl||this.options.appDir+"templates/",customControlUrl:this.options.customControlUrl||this.options.appDir+"customwebcontrols/",customWidgetUrl:this.options.customWidgetUrl||this.options.appDir+"customwidgets/"},this.SOMAccess=new G(this),this.Notifier=V.create(this),this.SOMManager=j.create(this),this.Interaction=R.create(this),this.Flashing=q.create(this),this.Tooltip=X.create(this);var o=I(this);this.gfxWebLib=o.create(this.config.appType,t),this.gfxWebLib.setHasActiveStyle(n.hasStartStyle),this.gfxWebLib.setProjectVersion(n.ProjectVersion),this.gfxWebLib.setProjectId(n.ProjectId),this.gfxWebLib.setCheckAuthorization(n.CheckAuthorization),r.a.Settings.zoomOnPoint&&!e.checkProjectVersion(this.gfxWebLib.getProjectVersion(),18)&&(r.a.Settings.scrollPopups=!0),this.toplevelWindow=e.createTopLevelWindow(this,t,this.options),this.popupScreen=e.createPopupScreen(this),e.addCoreEvents(this)}return e.prototype.reset=function(e){if(e=e||{},r.a.jQL.extend(r.a.Settings,e.clientConfig),this.config.imageUrl=e.imageUrl||this.config.imageUrl,this.config.templateUrl=e.templateUrl||this.config.templateUrl,this.config.customControlUrl=e.customControlUrl||this.config.customControlUrl,this.config.customWidgetUrl=e.customWidgetUrl||this.config.customWidgetUrl,void 0!==e.ProjectId&&e.ProjectId!==this.gfxWebLib.getProjectId()&&window.location.reload(),void 0!==e.ProjectVersion){const t=this.gfxWebLib.getProjectVersion();this.gfxWebLib.setProjectVersion(e.ProjectVersion),t!==this.gfxWebLib.getProjectVersion()&&window.location.reload()}void 0!==e.CheckAuthorization&&this.gfxWebLib.setCheckAuthorization(e.CheckAuthorization),this.SOMManager.reset()},e.prototype.close=function(){if(this.toplevelWindow){this.toplevelWindow.handler.onCleanUp(this.toplevelWindow);var e=this.toplevelWindow.domNode;e&&e.parentNode&&e.parentNode.removeChild(e)}this.Tooltip&&this.Tooltip.onCleanUp()},e.checkProjectVersion=function(e,t){return!e||e.split(".")[0]>=t},e.createTopLevelWindow=function(e,t,n){var o=u.createWindow(e,t,n);return e.SOMManager.addScreenWindow(o),o},e.createPopupScreen=function(e){var t=f.createWindow(e);return f.createScreen(e,t)},e.addCoreEvents=function(e){e.domNode.setAttribute("tabindex","0"),e.domNode.focus(),e.domNode.onkeydown=e.Interaction.Keyboard.onKeyDown,e.domNode.onkeyup=e.Interaction.Keyboard.onKeyUp,e.domNode.addEventListener("wheel",e.Interaction.Wheel.onMouseWheel,!1),document.addEventListener("wheel",function(e){e.ctrlKey&&e.preventDefault()},{passive:!1}),e.config.appType!==r.a.AppType.CLOUD?window.onresize=function(){f.onResize(e)}:f.onResize(e),document.oncontextmenu=e.Interaction.emptyEventHandler,document.addEventListener("MSHoldVisual",e.Interaction.emptyEventHandler,!1),r.a.Settings.zoomOnPoint||document.addEventListener("scroll",e.toplevelWindow.control.handler.onScroll.bind(null,e.toplevelWindow),!1)},e}();n.d(t,"HmiEnums",function(){return b}),n.d(t,"HmiDatatypes",function(){return T}),n.d(t,"Dialogs",function(){return P}),n.d(t,"Core",function(){return Z}),o.Services.Pointers=H}]);